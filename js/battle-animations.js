function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),_setPrototypeOf(t.prototype.constructor=t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var BattleScene=function(){function l(i,t,e){this.battle=void 0,this.animating=!0,this.acceleration=1,this.gen=7,this.mod="",this.activeCount=1,this.numericId=0,this.$frame=void 0,this.$battle=null,this.$options=null,this.log=void 0,this.$terrain=null,this.$weather=null,this.$bgEffect=null,this.$bg=null,this.$sprite=null,this.$sprites=[null,null],this.$spritesFront=[null,null],this.$stat=null,this.$fx=null,this.$leftbar=null,this.$rightbar=null,this.$turn=null,this.$messagebar=null,this.$delay=null,this.$hiddenMessage=null,this.$tooltips=null,this.tooltips=void 0,this.sideConditions=[{},{}],this.preloadDone=0,this.preloadNeeded=0,this.bgm=null,this.backdropImage="",this.bgmNum=0,this.preloadCache={},this.messagebarOpen=!1,this.customControls=!1,this.interruptionCount=1,this.curWeather="",this.curTerrain="",this.timeOffset=0,this.pokemonTimeOffset=0,this.minDelay=0,this.activeAnimations=$(),this.battle=i,t.addClass("battle"),this.$frame=t,this.log=new BattleLog(e[0],this),this.log.battleParser.pokemonName=function(t){if(!t)return"";if(i.ignoreNicks||i.ignoreOpponent){var e=i.getPokemon(t);if(e)return e.speciesForme}return t.startsWith("p")?":"===t.charAt(3)?t.slice(4).trim():":"===t.charAt(2)?t.slice(3).trim():"???pokemon:"+t+"???":"???pokemon:"+t+"???"};var a=0;i.id&&(a=parseInt(i.id.slice(i.id.lastIndexOf("-")+1),10),this.battle.id.includes("digimon")&&(this.mod="digimon")),a=a||Math.floor(1e6*Math.random()),this.numericId=a,this.tooltips=new BattleTooltips(i),this.tooltips.listen(t[0]),this.preloadEffects()}var t=l.prototype;return t.reset=function(){this.updateGen(),this.$options?this.log.reset():(this.$options=$('<div class="battle-options"></div>'),$(this.log.elem).prepend(this.$options)),this.$frame.empty(),this.$battle=$('<div class="innerbattle"></div>'),this.$frame.append(this.$battle),this.$bg=$('<div class="backdrop" style="background-image:url('+Dex.resourcePrefix+this.backdropImage+');display:block;opacity:0.8"></div>'),this.$terrain=$('<div class="weather"></div>'),this.$weather=$('<div class="weather"></div>'),this.$bgEffect=$("<div></div>"),this.$sprite=$("<div></div>"),this.$sprites=[$("<div></div>"),$("<div></div>")],this.$spritesFront=[$("<div></div>"),$("<div></div>")],this.$sprite.append(this.$sprites[1]),this.$sprite.append(this.$spritesFront[1]),this.$sprite.append(this.$spritesFront[0]),this.$sprite.append(this.$sprites[0]),this.$stat=$('<div role="complementary" aria-label="Active Pokemon"></div>'),this.$fx=$("<div></div>"),this.$leftbar=$('<div class="leftbar" role="complementary" aria-label="Your Team"></div>'),this.$rightbar=$('<div class="rightbar" role="complementary" aria-label="Opponent\'s Team"></div>'),this.$turn=$("<div></div>"),this.$messagebar=$('<div class="messagebar message"></div>'),this.$delay=$("<div></div>"),this.$hiddenMessage=$('<div class="message" style="position:absolute;display:block;visibility:hidden"></div>'),this.$tooltips=$('<div class="tooltips"></div>'),this.$battle.append(this.$bg),this.$battle.append(this.$terrain),this.$battle.append(this.$weather),this.$battle.append(this.$bgEffect),this.$battle.append(this.$sprite),this.$battle.append(this.$stat),this.$battle.append(this.$fx),this.$battle.append(this.$leftbar),this.$battle.append(this.$rightbar),this.$battle.append(this.$turn),this.$battle.append(this.$messagebar),this.$battle.append(this.$delay),this.$battle.append(this.$hiddenMessage),this.$battle.append(this.$tooltips),this.animating||this.$battle.append('<div class="seeking"><strong>seeking...</strong></div>'),this.messagebarOpen=!1,this.timeOffset=0,this.pokemonTimeOffset=0,this.curTerrain="",this.curWeather="",this.log.battleParser.perspective=this.battle.mySide.sideid,this.resetSides(!0)},t.animationOff=function(){this.$battle.append('<div class="seeking"><strong>seeking...</strong></div>'),this.stopAnimation(),this.animating=!1,this.$messagebar.empty().css({opacity:0,height:0})},t.stopAnimation=function(){this.interruptionCount++,this.$battle.find(":animated").finish(),this.$fx.empty()},t.animationOn=function(){if(!this.animating){$.fx.off=!1,this.animating=!0,this.$battle.find(".seeking").remove(),this.updateSidebars();for(var t=0,e=this.battle.sides;t<e.length;t++)for(var i=0,a=e[t].pokemon;i<a.length;i++){var s=a[i];s.sprite.reset(s)}this.updateWeather(!0),this.resetTurn(),this.resetSideConditions()}},t.pause=function(){var t=this;this.stopAnimation(),this.updateBgm(),0<this.battle.turn?this.$frame.append('<div class="playbutton"><button name="play"><i class="fa fa-play icon-play"></i> Resume</button></div>'):(this.$frame.append('<div class="playbutton"><button name="play"><i class="fa fa-play"></i> Play</button><br /><br /><button name="play-muted" class="startsoundchooser" style="font-size:10pt;display:none">Play (music off)</button></div>'),this.$frame.find("div.playbutton button[name=play-muted]").click(function(){t.setMute(!0),t.battle.play()})),this.$frame.find("div.playbutton button[name=play]").click(function(){return t.battle.play()})},t.resume=function(){this.$frame.find("div.playbutton").remove(),this.updateBgm()},t.setMute=function(t){BattleSound.setMute(t)},t.wait=function(t){this.animating&&(this.timeOffset+=t)},t.addSprite=function(t){t.$el&&this.$sprites[+t.isFrontSprite].append(t.$el)},t.showEffect=function(t,e,i,a,s){"string"==typeof t&&(t=BattleEffects[t]),e.time||(e.time=0),i.time||(i.time=e.time+500),e.time+=this.timeOffset,i.time+=this.timeOffset,!i.scale&&0!==i.scale&&e.scale&&(i.scale=e.scale),!i.xscale&&0!==i.xscale&&e.xscale&&(i.xscale=e.xscale),!i.yscale&&0!==i.yscale&&e.yscale&&(i.yscale=e.yscale),i=Object.assign({},e,i);var n=this.pos(e,t),l=this.posT(i,t,a,e),o=$('<img src="'+t.url+'" style="display:block;position:absolute" />');this.$fx.append(o),o=this.$fx.children().last(),e.time?(o.css(Object.assign({},n,{opacity:0})),o.delay(e.time).animate({opacity:n.opacity},1)):o.css(n),o.animate(l,i.time-e.time),"fade"===s&&o.animate({opacity:0},100),"explode"===s&&(i.scale&&(i.scale*=3),i.xscale&&(i.xscale*=3),i.yscale&&(i.yscale*=3),i.opacity=0,n=this.pos(i,t),o.animate(n,200)),this.waitFor(o)},t.backgroundEffect=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=$('<div class="background"></div>');s.css({background:t,display:"block",opacity:0}),this.$bgEffect.append(s),s.delay(a).animate({opacity:i},250).delay(e-250),s.animate({opacity:0},250)},t.pos=function(t,e){(t=Object.assign({x:0,y:0,z:0,scale:1,opacity:1},t)).xscale||0===t.xscale||(t.xscale=t.scale),t.yscale||0===t.yscale||(t.yscale=t.scale);var i=210,a=245,s=5===e.gen?2-t.z/200:1.5-t.z/200*.5,n=(s<.1&&(s=.1),i+=t.z/200*220,a+=t.z/200*-110,i+=Math.floor(t.x*s),a-=Math.floor(t.y*s),Math.floor(e.w*s*t.xscale)),l=Math.floor(e.h*s*t.yscale),s=Math.floor((e.h-2*(e.y||0))*s*t.yscale),i={left:i-=Math.floor(n/2),top:a-=Math.floor(s/2),width:n,height:l,opacity:t.opacity};return t.display&&(i.display=t.display),i},t.posT=function(t,e,i,a){var s=this.pos(t,e),n=a?this.pos(a,e):null,l={left:"linear",top:"linear",width:"linear",height:"linear",opacity:"linear"};return"ballistic"===i&&(l.top=s.top<n.top?"ballisticUp":"ballisticDown"),"ballisticUnder"===i&&(l.top=s.top<n.top?"ballisticDown":"ballisticUp"),"ballistic2"===i&&(l.top=s.top<n.top?"quadUp":"quadDown"),"ballistic2Back"===i&&(l.top=0<t.z?"quadUp":"quadDown"),"ballistic2Under"===i&&(l.top=s.top<n.top?"quadDown":"quadUp"),"swing"===i&&(l.left="swing",l.top="swing",l.width="swing",l.height="swing"),"accel"===i&&(l.left="quadDown",l.top="quadDown",l.width="quadDown",l.height="quadDown"),"decel"===i&&(l.left="quadUp",l.top="quadUp",l.width="quadUp",l.height="quadUp"),{left:[s.left,l.left],top:[s.top,l.top],width:[s.width,l.width],height:[s.height,l.height],opacity:[s.opacity,l.opacity]}},t.waitFor=function(t){this.activeAnimations=this.activeAnimations.add(t)},t.startAnimations=function(){this.$fx.empty(),this.activeAnimations=$(),this.timeOffset=0,this.minDelay=0},t.finishAnimations=function(){if((this.minDelay||this.timeOffset)&&(this.$delay.delay(Math.max(this.minDelay,this.timeOffset)),this.activeAnimations=this.activeAnimations.add(this.$delay)),this.activeAnimations.length)return this.activeAnimations.promise()},t.preemptCatchup=function(){this.log.preemptCatchup()},t.message=function(t){var e,i=this;this.messagebarOpen||(this.log.addSpacer(),this.animating&&(this.$messagebar.empty(),this.$messagebar.css({display:"block",opacity:0,height:"auto"}),this.$messagebar.animate({opacity:1},this.battle.messageFadeTime/this.acceleration))),(t=this.battle.hardcoreMode&&"<small>("===t.slice(0,8)?"":t)&&this.animating&&(this.$hiddenMessage.append("<p></p>"),(e=this.$hiddenMessage.children().last()).html(t),e.css({display:"block",opacity:0}),e.animate({height:"hide"},1,function(){e.appendTo(i.$messagebar),e.animate({height:"show","padding-bottom":4,opacity:1},i.battle.messageFadeTime/i.acceleration)}),this.waitFor(e)),this.messagebarOpen=!0},t.maybeCloseMessagebar=function(t,e){return!!this.log.battleParser.sectionBreak(t,e)&&(!!this.messagebarOpen&&(this.closeMessagebar(),!0))},t.closeMessagebar=function(){return!!this.messagebarOpen&&(this.messagebarOpen=!1,this.animating&&(this.$messagebar.delay(this.battle.messageShownTime/this.acceleration).animate({opacity:0},this.battle.messageFadeTime/this.acceleration),this.waitFor(this.$messagebar)),!0)},t.runMoveAnim=function(t,e){var i,a,s;this.animating&&(s=BattleMoveAnims[t],(s=3<=this.acceleration?(a=!(i=!e[1]||e[0]===e[1])&&"Special"===this.battle.dex.moves.get(t).category,BattleOtherAnims[i?"fastanimself":a?"fastanimspecial":"fastanimattack"]):s||BattleMoveAnims.tackle).anim(this,e.map(function(t){return t.sprite})))},t.runOtherAnim=function(t,e){this.animating&&BattleOtherAnims[t].anim(this,e.map(function(t){return t.sprite}))},t.runStatusAnim=function(t,e){this.animating&&BattleStatusAnims[t].anim(this,e.map(function(t){return t.sprite}))},t.runResidualAnim=function(t,e){this.animating&&BattleMoveAnims[t].residualAnim(this,[e.sprite])},t.runPrepareAnim=function(t,e,i){var a;!this.animating||3<=this.acceleration||(a=BattleMoveAnims[t]).prepareAnim&&a.prepareAnim(this,[e.sprite,i.sprite])},t.updateGen=function(){var t,e=this.battle.gen,i=(Dex.prefs("nopastgens")&&(e=6),Dex.prefs("bwgfx")&&5<e&&(e=5),this.gen=e,this.activeCount=(null==(i=this.battle.nearSide)?void 0:i.active.length)||1,"string"==typeof this.battle.rated&&this.battle.rated.startsWith("Smogon Premier League"));this.battle.id.includes("bigrain")&&this.setBgm(-102),i?(t=e<=1?"fx/bg-gen1-spl.png":e<=2?"fx/bg-gen2-spl.png":e<=3?"fx/bg-gen3-spl.png":e<=4?"fx/bg-gen4-spl.png":"fx/bg-spl.png",this.setBgm(-101)):t=e<=1?"fx/bg-gen1.png?":e<=2?"fx/bg-gen2.png?":e<=3?"fx/"+BattleBackdropsThree[this.numericId%BattleBackdropsThree.length]+"?":e<=4?"fx/"+BattleBackdropsFour[this.numericId%BattleBackdropsFour.length]:e<=5?"fx/"+BattleBackdropsFive[this.numericId%BattleBackdropsFive.length]:"sprites/gen6bgs/"+BattleBackdrops[this.numericId%BattleBackdrops.length],this.backdropImage=t,this.$bg&&this.$bg.css("background-image","url("+Dex.resourcePrefix+this.backdropImage+")")},t.getDetailsText=function(t){var e,i=null!=(i=t.side)&&i.isFar&&(this.battle.ignoreOpponent||this.battle.ignoreNicks)?t.speciesForme:t.name;return i!==t.speciesForme&&(i+=" ("+t.speciesForme+")"),t===t.side.active[0]?i+=" (active)":t.fainted?i+=" (fainted)":(e="",t.hp!==t.maxhp&&(e+=t.getHPText()),t.status&&(e&&(e+="|"),e+=t.status),e&&(i+=" ("+e+")")),BattleLog.escapeHTML(i)},t.getSidebarHTML=function(t,e){var i=this.battle.hardcoreMode&&this.battle.gen<7,a=this.battle.speciesClause?1/0:Math.max(t.pokemon.length-t.totalPokemon,0),s=[],n=[],l=!1,o=!1;if(a)for(var c=0;c<t.pokemon.length;c++){var r=t.pokemon[c].getBaseSpecies().baseSpecies;if(a&&n.includes(r)){for(var h=0;h<s.length;h++){var p=s[h];t.pokemon[p[1]].getBaseSpecies().baseSpecies===r&&(p[0]="pokemon-illusion")}o=!0,a--}else s.push(["pokemon",c]),n.push(r),["Zoroark","Zorua"].includes(r)&&(l=!0)}else for(var m=0;m<t.pokemon.length;m++)s.push(["pokemon",m]);for(!l&&o&&s.length<t.totalPokemon&&s.push(["pseudo-zoroark",null]);s.length<t.totalPokemon;)s.push(["unrevealed",null]);for(;s.length<6;)s.push(["empty",null]);for(var y="",d=0;d<s.length;d++){var f=s[d],b=f[0],f=f[1],u=null!==f?t.pokemon[f]:null,f=' class="picon has-tooltip" data-tooltip="pokemon|'+t.n+"|"+f+("pokemon-illusion"===b?"|illusion":"")+'"';"empty"===b?y+='<span class="picon" style="'+Dex.getPokemonIcon("pokeball-none")+'"></span>':i?null!=u&&u.fainted?y+="<span"+f+' style="'+Dex.getPokemonIcon("pokeball-fainted")+'" aria-label="Fainted"></span>':null!=u&&u.status?y+="<span"+f+' style="'+Dex.getPokemonIcon("pokeball-statused")+'" aria-label="Statused"></span>':y+="<span"+f+' style="'+Dex.getPokemonIcon("pokeball")+'" aria-label="Non-statused"></span>':"pseudo-zoroark"===b?y+='<span class="picon" style="'+Dex.getPokemonIcon("zoroark")+'" title="Unrevealed Illusion user" aria-label="Unrevealed Illusion user"></span>':u?!u.ident&&this.battle.teamPreviewCount&&this.battle.teamPreviewCount<t.pokemon.length?(b=this.getDetailsText(u),y+="<span"+f+' style="'+Dex.getPokemonIcon(u,!t.isFar)+';opacity:0.6" aria-label="'+b+'"></span>'):(b=this.getDetailsText(u),y+="<span"+f+' style="'+Dex.getPokemonIcon(u,!t.isFar)+'" aria-label="'+b+'"></span>'):y+='<span class="picon" style="'+Dex.getPokemonIcon("pokeball")+'" title="Not revealed" aria-label="Not revealed"></span>',d%3==2&&(y+='</div><div class="teamicons">')}var y='<div class="teamicons">'+y+"</div>",x=t.rating?' title="Rating: '+BattleLog.escapeHTML(t.rating)+'"':"";return'<div class="trainer trainer-'+e+'"'+(t.name?"":' style="opacity: 0.4"')+"><strong>"+BattleLog.escapeHTML(t.name)+'</strong><div class="trainersprite"'+x+' style="background-image:url('+Dex.resolveAvatar(t.avatar)+')"></div>'+y+"</div>"},t.updateSidebar=function(t){"freeforall"===this.battle.gameType?(this.updateLeftSidebar(),this.updateRightSidebar()):t===this.battle.nearSide||t===this.battle.nearSide.ally?this.updateLeftSidebar():this.updateRightSidebar()},t.updateLeftSidebar=function(){var t,e=this.battle.nearSide;e.ally?(t=e.ally,this.$leftbar.html(this.getSidebarHTML(e,"near2")+this.getSidebarHTML(t,"near"))):2<this.battle.sides.length?(t=this.battle.sides[0===e.n?3:2],this.$leftbar.html(this.getSidebarHTML(t,"near2")+this.getSidebarHTML(e,"near"))):this.$leftbar.html(this.getSidebarHTML(e,"near"))},t.updateRightSidebar=function(){var t,e=this.battle.farSide;e.ally?(t=e.ally,this.$rightbar.html(this.getSidebarHTML(e,"far2")+this.getSidebarHTML(t,"far"))):2<this.battle.sides.length?(t=this.battle.sides[0===e.n?3:2],this.$rightbar.html(this.getSidebarHTML(t,"far2")+this.getSidebarHTML(e,"far"))):this.$rightbar.html(this.getSidebarHTML(e,"far"))},t.updateSidebars=function(){this.updateLeftSidebar(),this.updateRightSidebar()},t.updateStatbars=function(){for(var t=0,e=this.battle.sides;t<e.length;t++)for(var i=0,a=e[t].active;i<a.length;i++){var s=a[i];s&&s.sprite.updateStatbar(s)}},t.resetSides=function(t){if(!t)for(var e=0,i=this.$sprites;e<i.length;e++)i[e].empty();for(var a=0,s=this.battle.sides;a<s.length;a++){var n,l=s[a];l.z=l.isFar?200:0,null==(n=l.missedPokemon)||null!=(n=n.sprite)&&n.destroy(),l.missedPokemon={sprite:new PokemonSprite(null,{x:l.leftof("freeforall"===this.battle.gameType?-50:-100),y:l.y,z:l.z,opacity:0},this,l.isFar)},l.missedPokemon.sprite.isMissedPokemon=!0}2<this.battle.sides.length&&2===this.sideConditions.length&&this.sideConditions.push({},{}),this.rebuildTooltips()},t.rebuildTooltips=function(){var t,e="",i="freeforall"===this.battle.gameType?{p2b:{top:70,left:250,width:80,height:100,tooltip:"activepokemon|1|1"},p2a:{top:90,left:390,width:100,height:100,tooltip:"activepokemon|1|0"},p1a:{top:200,left:130,width:120,height:160,tooltip:"activepokemon|0|0"},p1b:{top:200,left:350,width:150,height:160,tooltip:"activepokemon|0|1"}}:{p2c:{top:70,left:250,width:80,height:100,tooltip:"activepokemon|1|2"},p2b:{top:85,left:320,width:90,height:100,tooltip:"activepokemon|1|1"},p2a:{top:90,left:390,width:100,height:100,tooltip:"activepokemon|1|0"},p1a:{top:200,left:130,width:120,height:160,tooltip:"activepokemon|0|0"},p1b:{top:200,left:250,width:150,height:160,tooltip:"activepokemon|0|1"},p1c:{top:200,left:350,width:150,height:160,tooltip:"activepokemon|0|2"}};for(t in i)var a=i[t],e=(e=(e+='<div class="has-tooltip" style="position:absolute;')+("top:"+a.top+"px;left:"+a.left+"px;width:"+a.width+"px;height:"+a.height+"px;"))+('" data-id="'+t+'" data-tooltip="'+a.tooltip+'" data-ownheight="1"></div>');this.$tooltips.html(e)},t.teamPreview=function(){for(var t=0,e=0;e<2||"multi"===this.battle.gameType&&e<4;e++){for(var i=this.battle.sides[e],a=+this.battle.sidesSwitched^e%2,s="",n="",l="",o=(this.$sprites[a].empty(),0),c=0,r=0,h=0,p=0,m=0;m<i.pokemon.length;m++){var y=i.pokemon[m],d=("Xerneas-*"===y.speciesForme&&(y.speciesForme="Xerneas-Neutral"),"Ludicolo"===y.speciesForme&&o++,"Lombre"===y.speciesForme&&c++,"Lotad"===y.speciesForme&&r++,"Maractus"===y.speciesForme&&h++,"Hawlucha"===y.speciesForme&&p++,Dex.getSpriteData(y,!!a,{gen:this.gen,noScale:!0,mod:this.mod})),f=0,b=0,b=a?(f=98+3*(m+6-i.pokemon.length),228+50*(m+6-i.pokemon.length)):(f=248+3*m,148+50*m);s&&(s+=" / "),s+=y.speciesForme;n+='<img src="'+d.url+'" width="'+d.w+'" height="'+d.h+'" style="position:absolute;top:'+Math.floor(f-d.h/2)+"px;left:"+Math.floor(b-d.w/2)+'px" />',l+='<div style="position:absolute;top:'+(f+45)+"px;left:"+(b-40)+'px;width:80px;font-size:10px;text-align:center;color:#FFF;">';d=y.gender;"M"!==d&&"F"!==d||(l+='<img src="'+Dex.fxPrefix+"gender-"+d.toLowerCase()+'.png" alt="'+d+'" width="7" height="10" class="pixelated" style="margin-bottom:-1px" /> '),100!==y.level&&(l+='<span style="text-shadow:#000 1px 1px 0,#000 1px -1px 0,#000 -1px 1px 0,#000 -1px -1px 0"><small>L</small>'+y.level+"</span>"),"(mail)"===y.item?l+=' <img src="'+Dex.resourcePrefix+'fx/mail.png" width="8" height="10" alt="F" style="margin-bottom:-1px" />':y.item&&(l+=' <img src="'+Dex.resourcePrefix+'fx/item.png" width="8" height="10" alt="F" style="margin-bottom:-1px" />'),l+="</div>"}i.totalPokemon=i.pokemon.length,s&&this.log.addDiv("chat battle-history","<strong>"+BattleLog.escapeHTML(i.name)+'\'s team:</strong> <em style="color:#445566;display:block;">'+BattleLog.escapeHTML(s)+"</em>"),this.$sprites[a].html(n+l),t||(2<=o?t=-3:2<=o+c&&(t=3<=o+c+r||2<=h+p?-3:-2))}0!==t&&this.setBgm(t),this.wait(1e3),this.updateSidebars()},t.showJoinButtons=function(){!this.battle.joinButtons||this.battle.ended||this.battle.rated||(this.battle.p1.name||this.$battle.append('<div class="playbutton1"><button name="joinBattle">Join Battle</button></div>'),this.battle.p2.name||this.$battle.append('<div class="playbutton2"><button name="joinBattle">Join Battle</button></div>'))},t.hideJoinButtons=function(){this.battle.joinButtons&&this.$battle.find(".playbutton1, .playbutton2").remove()},t.pseudoWeatherLeft=function(t){var e="<br />"+Dex.moves.get(t[0]).name;return!t[1]&&t[2]&&(t[1]=t[2],t[2]=0),this.battle.gen<7&&this.battle.hardcoreMode?e:t[2]?e+" <small>("+t[1]+" or "+t[2]+" turns)</small>":t[1]?e+" <small>("+t[1]+" turn"+(1===t[1]?"":"s")+")</small>":e},t.sideConditionLeft=function(t,e,i){var a;return t[2]||t[3]||i?(a="<br />"+(e&&!i?"Foe's ":"")+Dex.moves.get(t[0]).name,!(this.battle.gen<7&&this.battle.hardcoreMode)&&(t[2]||t[3])?(!t[2]&&t[3]&&(t[2]=t[3],t[3]=0),t[3]?a+" <small>("+t[2]+" or "+t[3]+" turns)</small>":a+" <small>("+t[2]+" turn"+(1===t[2]?"":"s")+")</small>"):a):""},t.weatherLeft=function(){if(this.battle.gen<7&&this.battle.hardcoreMode)return"";var t,e="";this.battle.weather&&(e=""+({sunnyday:"Sun",desolateland:"Intense Sun",raindance:"Rain",primordialsea:"Heavy Rain",sandstorm:"Sandstorm",hail:"Hail",deltastream:"Strong Winds"}[this.battle.weather]||this.battle.weather),0!==this.battle.weatherMinTimeLeft?e+=" <small>("+this.battle.weatherMinTimeLeft+" or "+this.battle.weatherTimeLeft+" turns)</small>":0!==this.battle.weatherTimeLeft&&(e+=" <small>("+this.battle.weatherTimeLeft+" turn"+(1===this.battle.weatherTimeLeft?"":"s")+")</small>"),e=((t=this.battle.abilityActive(["Air Lock","Cloud Nine"]))?"<s>":"")+e+(t?"</s>":""));for(var i=0,a=this.battle.pseudoWeather;i<a.length;i++){var s=a[i];e+=this.pseudoWeatherLeft(s)}return e},t.sideConditionsLeft=function(t,e){var i,a="";for(i in t.sideConditions)a+=this.sideConditionLeft(t.sideConditions[i],t.isFar,e);return a},t.upkeepWeather=function(){var t=["desolateland","primordialsea","deltastream"].includes(this.curWeather);this.$weather.animate({opacity:1},300).animate({opacity:t?.9:.5},300)},t.updateWeather=function(t){var e=this;if(this.animating){for(var i=!1,a=this.battle.weather,s=(this.battle.abilityActive(["Air Lock","Cloud Nine"])&&(a=""),""),n=0,l=this.battle.pseudoWeather;n<l.length;n++){var o=l[n],c=toID(o[0]);switch(c){case"electricterrain":case"grassyterrain":case"mistyterrain":case"psychicterrain":s=c;break;default:s=s||"pseudo"}}"desolateland"!==a&&"primordialsea"!==a&&"deltastream"!==a||(i=!0);for(var r=this.weatherLeft(),h=0,p=this.battle.sides;h<p.length;h++){var m=p[h];r+=this.sideConditionsLeft(m)}if(r=r&&"<br />"+r,t)return this.$weather.html("<em>"+r+"</em>"),this.curWeather===a&&this.curTerrain===s?void 0:(this.$terrain.attr("class",s?"weather "+s+"weather":"weather"),this.curTerrain=s,this.$weather.attr("class",a?"weather "+a+"weather":"weather"),this.$weather.css("opacity",i||!a?.9:.5),void(this.curWeather=a));a!==this.curWeather?(this.$weather.animate({opacity:0},this.curWeather?300:100,function(){e.$weather.html("<em>"+r+"</em>"),e.$weather.attr("class",a?"weather "+a+"weather":"weather"),e.$weather.animate({opacity:i||!a?.9:.5},300)}),this.curWeather=a):this.$weather.html("<em>"+r+"</em>"),s!==this.curTerrain&&(this.$terrain.animate({top:360,opacity:0},this.curTerrain?400:1,function(){e.$terrain.attr("class",s?"weather "+s+"weather":"weather"),e.$terrain.animate({top:0,opacity:1},400)}),this.curTerrain=s)}},t.resetTurn=function(){this.battle.turn<=0?this.$turn.html(""):this.$turn.html('<div class="turn has-tooltip" data-tooltip="field" data-ownheight="1">Turn '+this.battle.turn+"</div>")},t.incrementTurn=function(){var t,e;!this.animating||(e=this.battle.turn)<=0||(t=this.$turn.children(),(e=$('<div class="turn has-tooltip" data-tooltip="field" data-ownheight="1">Turn '+e+"</div>")).css({opacity:0,left:160}),this.$turn.append(e),e.animate({opacity:1,left:110},500).animate({opacity:.4},1500),t.animate({opacity:0,left:60},500,function(){t.remove()}),this.updateAcceleration(),this.wait(500/this.acceleration))},t.updateAcceleration=function(){2<this.battle.turnsSinceMoved?this.acceleration=(this.battle.messageFadeTime<150?2:1)*Math.min(this.battle.turnsSinceMoved-1,3):(this.acceleration=this.battle.messageFadeTime<150?2:1,this.battle.messageFadeTime<50&&(this.acceleration=3))},t.addPokemonSprite=function(t){var e=new PokemonSprite(Dex.getSpriteData(t,t.side.isFar,{gen:this.gen,mod:this.mod}),{x:t.side.x,y:t.side.y,z:t.side.z,opacity:0},this,t.side.isFar);return e.$el&&this.$sprites[+t.side.isFar].append(e.$el),e},t.addSideCondition=function(t,e,i){if(this.animating){var a=this.battle.sides[t],s=+a.isFar,n=a.x,l=a.y;switch("freeforall"===this.battle.gameType&&(n+=a.isFar?20:-20,1<a.n&&(n+=a.isFar?-140:140,l+=a.isFar?14:-20)),e){case"auroraveil":var o=new Sprite(BattleEffects.auroraveil,{display:"block",x:n,y:l,z:a.behind(-14),xscale:1,yscale:0,opacity:.1},this);this.$spritesFront[s].append(o.$el),this.sideConditions[t][e]=[o],o.anim({opacity:.7,time:i?0:400}).anim({opacity:.3,time:i?0:300});break;case"reflect":o=new Sprite(BattleEffects.reflect,{display:"block",x:n,y:l,z:a.behind(-17),xscale:1,yscale:0,opacity:.1},this);this.$spritesFront[s].append(o.$el),this.sideConditions[t][e]=[o],o.anim({opacity:.7,time:i?0:400}).anim({opacity:.3,time:i?0:300});break;case"safeguard":o=new Sprite(BattleEffects.safeguard,{display:"block",x:n,y:l,z:a.behind(-20),xscale:1,yscale:0,opacity:.1},this);this.$spritesFront[s].append(o.$el),this.sideConditions[t][e]=[o],o.anim({opacity:.7,time:i?0:400}).anim({opacity:.3,time:i?0:300});break;case"lightscreen":o=new Sprite(BattleEffects.lightscreen,{display:"block",x:n,y:l,z:a.behind(-23),xscale:1,yscale:0,opacity:.1},this);this.$spritesFront[s].append(o.$el),this.sideConditions[t][e]=[o],o.anim({opacity:.7,time:i?0:400}).anim({opacity:.3,time:i?0:300});break;case"mist":o=new Sprite(BattleEffects.mist,{display:"block",x:n,y:l,z:a.behind(-27),xscale:1,yscale:0,opacity:.1},this);this.$spritesFront[s].append(o.$el),this.sideConditions[t][e]=[o],o.anim({opacity:.7,time:i?0:400}).anim({opacity:.3,time:i?0:300});break;case"stealthrock":var o=new Sprite(BattleEffects.rock1,{display:"block",x:n+a.leftof(-40),y:l-10,z:a.z,opacity:.5,scale:.2},this),c=new Sprite(BattleEffects.rock2,{display:"block",x:n+a.leftof(-20),y:l-40,z:a.z,opacity:.5,scale:.2},this),r=new Sprite(BattleEffects.rock1,{display:"block",x:n+a.leftof(30),y:l-20,z:a.z,opacity:.5,scale:.2},this),h=new Sprite(BattleEffects.rock2,{display:"block",x:n+a.leftof(10),y:l-30,z:a.z,opacity:.5,scale:.2},this);this.$spritesFront[s].append(o.$el),this.$spritesFront[s].append(c.$el),this.$spritesFront[s].append(r.$el),this.$spritesFront[s].append(h.$el),this.sideConditions[t][e]=[o,c,r,h];break;case"gmaxsteelsurge":o=new Sprite(BattleEffects.greenmetal1,{display:"block",x:n+a.leftof(-30),y:l-20,z:a.z,opacity:.5,scale:.8},this),c=new Sprite(BattleEffects.greenmetal2,{display:"block",x:n+a.leftof(35),y:l-15,z:a.z,opacity:.5,scale:.8},this),r=new Sprite(BattleEffects.greenmetal1,{display:"block",x:n+a.leftof(50),y:l-10,z:a.z,opacity:.5,scale:.8},this);this.$spritesFront[s].append(o.$el),this.$spritesFront[s].append(c.$el),this.$spritesFront[s].append(r.$el),this.sideConditions[t][e]=[o,c,r];break;case"spikes":h=this.sideConditions[t].spikes,o=(h||(this.sideConditions[t].spikes=h=[]),this.battle.sides[t].sideConditions.spikes[1]);h.length<1&&1<=o&&(c=new Sprite(BattleEffects.caltrop,{display:"block",x:n-25,y:l-40,z:a.z,scale:.3},this),this.$spritesFront[s].append(c.$el),h.push(c)),h.length<2&&2<=o&&(r=new Sprite(BattleEffects.caltrop,{display:"block",x:n+30,y:l-45,z:a.z,scale:.3},this),this.$spritesFront[s].append(r.$el),h.push(r)),h.length<3&&3<=o&&(c=new Sprite(BattleEffects.caltrop,{display:"block",x:n+50,y:l-40,z:a.z,scale:.3},this),this.$spritesFront[s].append(c.$el),h.push(c));break;case"toxicspikes":r=this.sideConditions[t].toxicspikes,o=(r||(this.sideConditions[t].toxicspikes=r=[]),this.battle.sides[t].sideConditions.toxicspikes[1]);r.length<1&&1<=o&&(h=new Sprite(BattleEffects.poisoncaltrop,{display:"block",x:n+5,y:l-40,z:a.z,scale:.3},this),this.$spritesFront[s].append(h.$el),r.push(h)),r.length<2&&2<=o&&(c=new Sprite(BattleEffects.poisoncaltrop,{display:"block",x:n-15,y:l-35,z:a.z,scale:.3},this),this.$spritesFront[s].append(c.$el),r.push(c));break;case"stickyweb":h=new Sprite(BattleEffects.web,{display:"block",x:n+15,y:l-35,z:a.z,opacity:.4,scale:.7},this);this.$spritesFront[s].append(h.$el),this.sideConditions[t][e]=[h]}}},t.removeSideCondition=function(t,e){if(this.animating&&this.sideConditions[t][e]){for(var i=0,a=this.sideConditions[t][e];i<a.length;i++)a[i].destroy();delete this.sideConditions[t][e]}},t.resetSideConditions=function(){for(var t=0;t<this.sideConditions.length;t++){for(var e in this.sideConditions[t])this.removeSideCondition(t,e);for(var i in this.battle.sides[t].sideConditions)this.addSideCondition(t,i,!0)}},t.typeAnim=function(t,e){var i=BattleLog.escapeHTML(e).split("/").map(function(t){return'<img src="'+Dex.resourcePrefix+"sprites/types/"+t+'.png" alt="'+t+'" class="pixelated" />'}).join(" ");this.resultAnim(t,i,"neutral")},t.resultAnim=function(t,e,i){var a;this.animating&&(a=$('<div class="result '+i+'result"><strong>'+e+"</strong></div>"),this.$fx.append(a),a.delay(this.timeOffset).css({display:"block",opacity:0,top:t.sprite.top-5,left:t.sprite.left-75}).animate({opacity:1},1),a.animate({opacity:0,top:t.sprite.top-65},1e3,"swing"),this.wait(this.acceleration<2?350:250),t.sprite.updateStatbar(t),this.acceleration<3&&this.waitFor(a))},t.abilityActivateAnim=function(t,e){var i;this.animating&&(this.$fx.append('<div class="result abilityresult"><strong>'+e+"</strong></div>"),(i=this.$fx.children().last()).delay(this.timeOffset).css({display:"block",opacity:0,top:t.sprite.top+15,left:t.sprite.left-75}).animate({opacity:1},1),i.delay(800).animate({opacity:0},400,"swing"),this.wait(100),t.sprite.updateStatbar(t),this.acceleration<3&&this.waitFor(i))},t.damageAnim=function(t,e){var i,a,s,n;this.animating&&t.sprite.$statbar&&(t.sprite.updateHPText(t),i=t.sprite.$statbar.find("div.hp"),a=t.hpWidth(150),"y"===(s=l.getHPColor(t))&&(n=function(){i.addClass("hp-yellow")}),"r"===s&&(n=function(){i.addClass("hp-yellow hp-red")}),"100%"===e&&0<t.hp&&(e="99%"),this.resultAnim(t,this.battle.hardcoreMode?"Damage":"&minus;"+e,"bad"),i.animate({width:a,"border-right-width":a?1:0},350,n))},t.healAnim=function(t,e){var i,a,s,n;this.animating&&t.sprite.$statbar&&(t.sprite.updateHPText(t),i=t.sprite.$statbar.find("div.hp"),a=t.hpWidth(150),"g"===(s=l.getHPColor(t))&&(n=function(){i.removeClass("hp-yellow hp-red")}),"y"===s&&(n=function(){i.removeClass("hp-red")}),this.resultAnim(t,this.battle.hardcoreMode?"Heal":"+"+e,"good"),i.animate({width:a,"border-right-width":a?1:0},350,n))},t.removeEffect=function(t,e,i){return t.sprite.removeEffect(e,i)},t.addEffect=function(t,e,i){return t.sprite.addEffect(e,i)},t.animSummon=function(t,e,i){return t.sprite.animSummon(t,e,i)},t.animUnsummon=function(t,e){return t.sprite.animUnsummon(t,e)},t.animDragIn=function(t,e){return t.sprite.animDragIn(t,e)},t.animDragOut=function(t){return t.sprite.animDragOut(t)},t.updateStatbar=function(t,e,i){return t.sprite.updateStatbar(t,e,i)},t.updateStatbarIfExists=function(t,e,i){return t.sprite.updateStatbarIfExists(t,e,i)},t.animTransform=function(t,e,i){return t.sprite.animTransform(t,e,i)},t.clearEffects=function(t){return t.sprite.clearEffects()},t.removeTransform=function(t){return t.sprite.removeTransform()},t.animFaint=function(t){return t.sprite.animFaint(t)},t.animReset=function(t){return t.sprite.animReset()},t.anim=function(t,e,i){return t.sprite.anim(e,i)},t.beforeMove=function(t){return t.sprite.beforeMove()},t.afterMove=function(t){return t.sprite.afterMove()},t.setFrameHTML=function(t){this.customControls=!0,this.$frame.html(t)},t.setControlsHTML=function(t){this.customControls=!0,this.$frame.parent().children(".battle-controls").html(t)},t.preloadImage=function(t){var e=this,i=t.replace(/\.(gif|png)$/,"").replace(/\//g,"-");this.preloadCache[i]||(this.preloadNeeded++,this.preloadCache[i]=new Image,this.preloadCache[i].onload=function(){e.preloadDone++},this.preloadCache[i].src=t)},t.preloadEffects=function(){for(var t in BattleEffects)"alpha"!==t&&"omega"!==t&&((t=BattleEffects[t].url)&&this.preloadImage(t));this.preloadImage(Dex.resourcePrefix+"sprites/ani/substitute.gif"),this.preloadImage(Dex.resourcePrefix+"sprites/ani-back/substitute.gif")},t.rollBgm=function(){this.setBgm(1+this.numericId%16)},t.setBgm=function(t){if(this.bgmNum!==t){switch(this.bgmNum=t){case-1:this.bgm=BattleSound.loadBgm("audio/bw2-homika-dogars.mp3",1661,68131,this.bgm);break;case-2:case-4:this.bgm=BattleSound.loadBgm("discord/991534891147739197/xd-miror-b.mp3",9e3,57815,this.bgm);break;case-3:case-5:this.bgm=BattleSound.loadBgm("discord/991534889990103120/colosseum-miror-b.mp3",896,47462,this.bgm);break;case 1:this.bgm=BattleSound.loadBgm("discord/991534849095643146/dpp-trainer.mp3",13440,96959,this.bgm);break;case 2:this.bgm=BattleSound.loadBgm("discord/991534850324566106/dpp-rival.mp3",13888,66352,this.bgm);break;case 3:this.bgm=BattleSound.loadBgm("discord/991534848529416212/hgss-johto-trainer.mp3",23731,125086,this.bgm);break;case 4:this.bgm=BattleSound.loadBgm("discord/991534847841554523/hgss-kanto-trainer.mp3",13003,94656,this.bgm);break;case 5:this.bgm=BattleSound.loadBgm("discord/991534888719233095/bw-trainer.mp3",14629,110109,this.bgm);break;case 6:this.bgm=BattleSound.loadBgm("discord/991534887989416017/bw-rival.mp3",19180,57373,this.bgm);break;case 7:this.bgm=BattleSound.loadBgm("discord/991534888249466880/bw-subway-trainer.mp3",15503,110984,this.bgm);break;case 8:this.bgm=BattleSound.loadBgm("discord/991534889147047966/bw2-kanto-gym-leader.mp3",14626,58986,this.bgm);break;case 9:this.bgm=BattleSound.loadBgm("discord/991534889436463104/bw2-rival.mp3",7152,68708,this.bgm);break;case 10:this.bgm=BattleSound.loadBgm("discord/991534890552139888/xy-trainer.mp3",7802,82469,this.bgm);break;case 11:this.bgm=BattleSound.loadBgm("discord/991534890266918912/xy-rival.mp3",7802,58634,this.bgm);break;case 12:this.bgm=BattleSound.loadBgm("discord/991534845765357588/oras-trainer.mp3",13579,91548,this.bgm);break;case 13:this.bgm=BattleSound.loadBgm("discord/991534846323208242/oras-rival.mp3",14303,69149,this.bgm);break;case 14:this.bgm=BattleSound.loadBgm("discord/991534844993622106/sm-trainer.mp3",8323,89230,this.bgm);break;case-101:this.bgm=BattleSound.loadBgm("discord/991534844406415470/spl-elite4.mp3",3962,152509,this.bgm);break;case-102:this.bgm=BattleSound.loadBgm("discord/1030650267043115109/pbr-gateway.mp3",19712,86959,this.bgm);break;default:this.bgm=BattleSound.loadBgm("discord/991534845463375974/sm-rival.mp3",11389,62158,this.bgm)}this.updateBgm()}},t.updateBgm=function(){0<=this.battle.turn&&!this.battle.ended&&!this.battle.paused?(this.bgm||this.rollBgm(),this.bgm.resume()):this.bgm&&this.bgm.pause()},t.resetBgm=function(){this.bgm&&this.bgm.stop()},t.destroy=function(){this.log.destroy(),this.$frame&&this.$frame.empty(),this.bgm&&(this.bgm.destroy(),this.bgm=null),this.battle=null},l.getHPColor=function(t){var e=t.hp/t.maxhp;return.5<e?"g":.2<e?"y":"r"},l}(),Sprite=function(){function t(t,e,i){this.scene=void 0,this.$el=null,this.sp=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.scene=i;var a,s=null;t?(a=(s=t).rawHTML||'<img src="'+s.url+'" style="display:none;position:absolute"'+(s.pixelated?' class="pixelated"':"")+" />",this.$el=$(a)):s={w:0,h:0,url:""},this.sp=s,this.x=e.x,this.y=e.y,this.z=e.z,0!==e.opacity&&t&&this.$el.css(i.pos(e,s)),t||(this.delay=function(){return this},this.anim=function(){return this})}var e=t.prototype;return e.destroy=function(){this.$el&&this.$el.remove(),this.$el=null,this.scene=null},e.delay=function(t){return this.$el.delay(t),this},e.anim=function(t,e){return 0===(t=Object.assign({x:this.x,y:this.y,z:this.z,scale:1,opacity:1,time:500},t)).time?this.$el.css(this.scene.pos(t,this.sp)):this.$el.animate(this.scene.posT(t,this.sp,e,this),t.time),this},t}(),PokemonSprite=function(n){function d(t,e,i,a){var s=n.call(this,t,e,i)||this;return s.forme="",s.cryurl=void 0,s.subsp=null,s.$sub=null,s.isSubActive=!1,s.$statbar=null,s.isFrontSprite=void 0,s.isMissedPokemon=!1,s.oldsp=null,s.statbarLeft=0,s.statbarTop=0,s.left=0,s.top=0,s.effects={},s.cryurl=s.sp.cryurl,s.isFrontSprite=a,s}_inheritsLoose(d,n);var t=d.prototype;return t.destroy=function(){this.$el&&this.$el.remove(),this.$el=null,this.$statbar&&this.$statbar.remove(),this.$statbar=null,this.$sub&&this.$sub.remove(),this.$sub=null,this.scene=null},t.delay=function(t){return this.$el.delay(t),this.$sub&&this.$sub.delay(t),this},t.anim=function(t,e){t=Object.assign({x:this.x,y:this.y,z:this.z,scale:1,opacity:1,time:500},t);var i=this.isSubActive?[this.$sub,this.subsp]:[this.$el,this.sp];return i[0].animate(this.scene.posT(t,i[1],e,this),t.time),this},t.behindx=function(t){return this.x+(this.isFrontSprite?1:-1)*t},t.behindy=function(t){return this.y+(this.isFrontSprite?-1:1)*t},t.leftof=function(t){return this.x+(this.isFrontSprite?1:-1)*t},t.behind=function(t){return this.z+(this.isFrontSprite?1:-1)*t},t.removeTransform=function(){var t,e;this.scene.animating&&this.oldsp&&(t=this.oldsp,this.cryurl=t.cryurl,this.sp=t,this.oldsp=null,(e=this.isSubActive?this.$sub:this.$el).attr("src",t.url),e.css(this.scene.pos({x:this.x,y:this.y,z:this.isSubActive?this.behind(30):this.z,opacity:this.$sub?.3:1},t)))},t.animSub=function(t,e){var i;this.scene.animating&&!this.$sub&&(i=Dex.getSpriteData("substitute",this.isFrontSprite,{gen:this.scene.gen,mod:this.scene.mod}),this.subsp=i,this.$sub=$('<img src="'+i.url+'" style="display:block;opacity:0;position:absolute"'+(i.pixelated?' class="pixelated"':"")+" />"),this.scene.$spritesFront[+this.isFrontSprite].append(this.$sub),this.isSubActive=!0,t?e||this.animReset():(this.$el.animate(this.scene.pos({x:this.x,y:this.y,z:this.behind(30),opacity:.3},this.sp),500),this.$sub.css(this.scene.pos({x:this.x,y:this.y+50,z:this.z,opacity:0},i)),this.$sub.animate(this.scene.pos({x:this.x,y:this.y,z:this.z},i),500),this.scene.waitFor(this.$sub)))},t.animSubFade=function(t){this.$sub&&this.scene.animating&&(this.isSubActive=!1,t?(this.$sub.remove(),this.$sub=null,this.animReset()):(this.scene.timeOffset&&(this.$el.delay(this.scene.timeOffset),this.$sub.delay(this.scene.timeOffset)),this.$sub.animate(this.scene.pos({x:this.x,y:this.y-50,z:this.z,opacity:0},this.subsp),500),this.$sub=null,this.anim({time:500}),this.scene.animating&&this.scene.waitFor(this.$el)))},t.beforeMove=function(){if(!this.scene.animating)return!1;if(!this.isSubActive)return!1;this.isSubActive=!1,this.anim({time:300}),this.$sub.animate(this.scene.pos({x:this.leftof(-50),y:this.y,z:this.z,opacity:.5},this.subsp),300);for(var t=0,e=this.scene.battle.sides;t<e.length;t++)for(var i=0,a=e[t].active;i<a.length;i++){var s=a[i];s&&s.sprite!==this&&s.sprite.delay(300)}return this.scene.wait(300),this.scene.waitFor(this.$el),!0},t.afterMove=function(){var t=this;return this.scene.animating&&this.$sub&&!this.isSubActive&&(this.isSubActive=!0,this.$sub.delay(300),this.$el.add(this.$sub).promise().done(function(){t.$sub&&t.$el&&(t.$el.animate(t.scene.pos({x:t.x,y:t.y,z:t.behind(30),opacity:.3},t.sp),300),t.anim({time:300}))})),!1},t.removeSub=function(){var t;this.$sub&&(this.isSubActive=!1,this.scene.animating?(t=this.$sub).animate({opacity:0},function(){t.remove()}):this.$sub.remove(),this.$sub=null)},t.reset=function(t){var e;if(this.clearEffects(),t.volatiles.formechange||t.volatiles.dynamax?(this.oldsp||(this.oldsp=this.sp),this.sp=Dex.getSpriteData(t,this.isFrontSprite,{gen:this.scene.gen,mod:this.scene.mod})):this.oldsp&&(this.sp=this.oldsp,this.oldsp=null),this.$el&&(this.$el.stop(!0,!1),this.$el.remove(),e=$('<img src="'+this.sp.url+'" style="display:none;position:absolute"'+(this.sp.pixelated?' class="pixelated"':"")+" />"),this.$el=e),t.isActive()){for(var i in this.$el&&this.scene.$sprites[+this.isFrontSprite].append(this.$el),this.recalculatePos(t.slot),this.resetStatbar(t),this.$el.css(this.scene.pos({display:"block",x:this.x,y:this.y,z:this.z},this.sp)),t.volatiles)this.addEffect(i,!0);for(var a in t.turnstatuses)this.addEffect(a,!0);for(var s in t.movestatuses)this.addEffect(s,!0)}else this.$statbar&&(this.$statbar.remove(),this.$statbar=null)},t.animReset=function(){this.scene.animating&&(this.$sub?(this.isSubActive=!0,this.$el.stop(!0,!1),this.$sub.stop(!0,!1),this.$el.css(this.scene.pos({x:this.x,y:this.y,z:this.behind(30),opacity:.3},this.sp)),this.$sub.css(this.scene.pos({x:this.x,y:this.y,z:this.z},this.subsp))):(this.$el.stop(!0,!1),this.$el.css(this.scene.pos({x:this.x,y:this.y,z:this.z},this.sp))))},t.recalculatePos=function(t){var e=this.scene.activeCount-1,i=0;if("freeforall"===this.scene.battle.gameType&&(e++,t&&t++),this.scene.gen<=4&&e)this.x=(t-.52)*(this.isFrontSprite?1:-1)*-55,this.y=1+(this.isFrontSprite?1:-1),this.isFrontSprite&&(i=30*t),this.isFrontSprite||(i=-28*t);else{switch(e){case 0:this.x=0;break;case 1:this.sp.pixelated?this.x=(-100*t+18)*(this.isFrontSprite?1:-1):this.x=(-75*t+18)*(this.isFrontSprite?1:-1);break;case 2:this.x=(-70*t+20)*(this.isFrontSprite?1:-1)}this.y=this.isFrontSprite?7*t:-10*t,this.isFrontSprite&&(i=17*t),this.isFrontSprite&&!e&&this.sp.pixelated&&(i=15),this.isFrontSprite||(i=-7*t),this.isFrontSprite&&2===e&&(i=14*t-10)}this.scene.gen<=2?i+=this.isFrontSprite?20:1:this.scene.gen<=3?i+=this.isFrontSprite?30:5:5!==this.scene.gen&&(i+=this.isFrontSprite?30:20);var a=this.scene.pos({x:this.x,y:this.y,z:this.z},{w:0,h:96});a.top+=40,this.left=a.left,this.top=a.top,this.statbarLeft=a.left-80,this.statbarTop=a.top-73-i,this.statbarTop<-4&&(this.statbarTop=-4),e&&(!!t===this.isFrontSprite?this.$el.prependTo(this.$el.parent()):this.$el.appendTo(this.$el.parent()))},t.animSummon=function(t,e,i){this.scene.animating&&(this.scene.$sprites[+this.isFrontSprite].append(this.$el),this.recalculatePos(e),i?(this.$el.css("display","block"),this.animReset(),this.resetStatbar(t),t.hasVolatile("substitute")&&this.animSub(!0)):(this.cryurl&&BattleSound.playEffect(this.cryurl),this.$el.css(this.scene.pos({display:"block",x:this.x,y:this.y-10,z:this.z,scale:0,opacity:0},this.sp)),this.scene.showEffect("pokeball",{opacity:0,x:this.x,y:this.y+30,z:this.behind(50),scale:.7},{opacity:1,x:this.x,y:this.y-10,z:this.z,time:300/this.scene.acceleration},"ballistic2","fade"),this.scene.gen<=4?this.delay(this.scene.timeOffset+300/this.scene.acceleration).anim({x:this.x,y:this.y,z:this.z,time:400/this.scene.acceleration}):this.delay(this.scene.timeOffset+300/this.scene.acceleration).anim({x:this.x,y:this.y+30,z:this.z,time:400/this.scene.acceleration}).anim({x:this.x,y:this.y,z:this.z,time:300/this.scene.acceleration},"accel"),this.sp.shiny&&this.scene.acceleration<2&&BattleOtherAnims.shiny.anim(this.scene,[this]),this.scene.waitFor(this.$el),t.hasVolatile("substitute")&&(this.animSub(!0,!0),this.$sub.css(this.scene.pos({x:this.x,y:this.y,z:this.z},this.subsp)),this.$el.animate(this.scene.pos({x:this.x,y:this.y,z:this.behind(30),opacity:.3},this.sp),300)),this.resetStatbar(t,!0),this.scene.updateSidebar(t.side),this.$statbar.css({display:"block",left:this.statbarLeft,top:this.statbarTop+20,opacity:0}),this.$statbar.delay(300/this.scene.acceleration).animate({top:this.statbarTop,opacity:1},400/this.scene.acceleration),this.dogarsCheck(t)))},t.animDragIn=function(t,e){this.scene.animating&&(this.scene.$sprites[+this.isFrontSprite].append(this.$el),this.recalculatePos(e),this.$el.css(this.scene.pos({display:"block",x:this.leftof(-100),y:this.y,z:this.z,opacity:0},this.sp)),this.delay(300).anim({x:this.x,y:this.y,z:this.z,time:400},"decel"),this.scene.animating&&this.sp.shiny&&BattleOtherAnims.shiny.anim(this.scene,[this]),this.scene.waitFor(this.$el),this.scene.timeOffset=700,this.resetStatbar(t,!0),this.scene.updateSidebar(t.side),this.$statbar.css({display:"block",left:this.statbarLeft+(this.isFrontSprite?-100:100),top:this.statbarTop,opacity:0}),this.$statbar.delay(300).animate({left:this.statbarLeft,opacity:1},400),this.dogarsCheck(t))},t.animDragOut=function(t){if(!this.scene.animating)return this.animUnsummon(t,!0);this.$sub&&(this.isSubActive=!1,(e=this.$sub).animate(this.scene.pos({x:this.leftof(100),y:this.y,z:this.z,opacity:0,time:400},this.subsp),function(){e.remove()}),this.$sub=null),this.anim({x:this.leftof(100),y:this.y,z:this.z,opacity:0,time:400},"accel"),this.updateStatbar(t,!0);var e,i=this.$statbar;i&&(this.$statbar=null,i.animate({left:this.statbarLeft-(this.isFrontSprite?-100:100),opacity:0},300/this.scene.acceleration,function(){i.remove()}))},t.animUnsummon=function(t,e){var i;this.removeSub(),!this.scene.animating||e?(this.$el.hide(),this.$statbar&&(this.$statbar.remove(),this.$statbar=null)):(this.scene.gen<=4?this.anim({x:this.x,y:this.y-25,z:this.z,scale:0,opacity:0,time:400/this.scene.acceleration}):this.anim({x:this.x,y:this.y-40,z:this.z,scale:0,opacity:0,time:400/this.scene.acceleration}),this.scene.showEffect("pokeball",{opacity:1,x:this.x,y:this.y-40,z:this.z,scale:.7,time:300/this.scene.acceleration},{opacity:0,x:this.x,y:this.y,z:this.behind(50),time:700/this.scene.acceleration},"ballistic2"),this.scene.acceleration<3&&this.scene.wait(600/this.scene.acceleration),this.updateStatbar(t,!0),(i=this.$statbar)&&(this.$statbar=null,i.animate({left:this.statbarLeft+(this.isFrontSprite?50:-50),opacity:0},300/this.scene.acceleration,function(){i.remove()})))},t.animFaint=function(t){var e,i=this;this.removeSub(),this.scene.animating?(this.updateStatbar(t,!1,!0),this.scene.updateSidebar(t.side),this.cryurl&&BattleSound.playEffect(this.cryurl),this.anim({y:this.y-80,opacity:0},"accel"),this.scene.waitFor(this.$el),this.$el.promise().done(function(){i.$el.remove()}),(e=this.$statbar)&&(this.$statbar=null,e.animate({opacity:0},300,function(){e.remove()}))):(this.$el.remove(),this.$statbar&&(this.$statbar.remove(),this.$statbar=null))},t.animTransform=function(t,e,i){var a,s,n,l,o,c,r=this;(this.scene.animating||i)&&(a=Dex.getSpriteData(t,this.isFrontSprite,{gen:this.scene.gen,mod:this.scene.mod}),s=this.sp,i?t.volatiles.dynamax?this.oldsp=Dex.getSpriteData(t,this.isFrontSprite,{gen:this.scene.gen,mod:this.scene.mod,dynamax:!1}):this.oldsp=null:this.oldsp||(this.oldsp=s),this.sp=a,this.cryurl=a.cryurl,this.scene.animating&&(n=toID(t.getSpeciesForme()),l=!1,o=this.scene,e&&("kyogreprimal"===n?(BattleOtherAnims.primalalpha.anim(o,[this]),l=!0):"groudonprimal"===n?(BattleOtherAnims.primalomega.anim(o,[this]),l=!0):"necrozmaultra"===n?(BattleOtherAnims.ultraburst.anim(o,[this]),l=!0):"zygardecomplete"===n?BattleOtherAnims.powerconstruct.anim(o,[this]):"wishiwashischool"===n||"greninjaash"===n?BattleOtherAnims.schoolingin.anim(o,[this]):"wishiwashi"===n?BattleOtherAnims.schoolingout.anim(o,[this]):"mimikyubusted"!==n&&"mimikyubustedtotem"!==n&&(BattleOtherAnims.megaevo.anim(o,[this]),l=!0)),(c=$('<img src="'+a.url+'" style="display:block;opacity:0;position:absolute"'+(a.pixelated?' class="pixelated"':"")+" />")).css(this.scene.pos({x:this.x,y:this.y,z:this.z,yscale:0,xscale:0,opacity:0},a)),this.$el.animate(this.scene.pos({x:this.x,y:this.y,z:this.z,yscale:0,xscale:0,opacity:.3},s),300,function(){r.cryurl&&l&&BattleSound.playEffect(r.cryurl),r.$el.replaceWith(c),r.$el=c,r.$el.animate(o.pos({x:r.x,y:r.y,z:r.z,opacity:1},a),300)}),this.scene.wait(500),this.scene.updateSidebar(t.side),i?this.resetStatbar(t):this.updateStatbar(t)))},t.pokeEffect=function(t){"protect"!==t&&"magiccoat"!==t||this.effects[t][0].anim({scale:1.2,opacity:1,time:100}).anim({opacity:.4,time:300})},t.addEffect=function(t,e){var i,a,s,n;t in this.effects?this.pokeEffect(t):(i=+this.isFrontSprite,"substitute"===t?this.animSub(e):"leechseed"===t?(n={display:"block",x:this.x-30,y:this.y-40,z:this.z,scale:.2,opacity:.6},a={display:"block",x:this.x+40,y:this.y-35,z:this.z,scale:.2,opacity:.6},s={display:"block",x:this.x+20,y:this.y-25,z:this.z,scale:.2,opacity:.6},n=new Sprite(BattleEffects.energyball,n,this.scene),a=new Sprite(BattleEffects.energyball,a,this.scene),s=new Sprite(BattleEffects.energyball,s,this.scene),this.scene.$spritesFront[i].append(n.$el),this.scene.$spritesFront[i].append(a.$el),this.scene.$spritesFront[i].append(s.$el),this.effects.leechseed=[n,a,s]):"protect"!==t&&"magiccoat"!==t||(n=new Sprite(BattleEffects.protect,{display:"block",x:this.x,y:this.y,z:this.behind(-15),xscale:1,yscale:0,opacity:.1},this.scene),this.scene.$spritesFront[i].append(n.$el),this.effects[t]=[n],n.anim({opacity:.9,time:e?0:400}).anim({opacity:.4,time:e?0:300})))},t.removeEffect=function(t,e){if("formechange"===t&&this.removeTransform(),"substitute"===t&&this.animSubFade(e),this.effects[t]){for(var i=0,a=this.effects[t];i<a.length;i++)a[i].destroy();delete this.effects[t]}},t.clearEffects=function(){for(var t in this.effects)this.removeEffect(t,!0);this.animSubFade(!0),this.removeTransform()},t.dogarsCheck=function(t){t.side.isFar||("Koffing"===t.speciesForme&&t.name.match(/dogars/i)?this.scene.setBgm(-1):"Hitmontop"===t.speciesForme&&t.name.match(/miror b/i)?this.scene.setBgm(-4):"Ludicolo"===t.speciesForme&&t.name.match(/miror b/i)?this.scene.setBgm(-5):[-1,-4,-5].includes(this.scene.bgmNum)&&this.scene.rollBgm())},t.getStatbarHTML=function(t){var e='<div class="statbar'+(this.isFrontSprite?" lstatbar":" rstatbar")+'" style="display: none">',i=this.isFrontSprite&&(this.scene.battle.ignoreOpponent||this.scene.battle.ignoreNicks),i=(e+="<strong>"+BattleLog.escapeHTML(i?t.speciesForme:t.name),t.gender),i=("M"!==i&&"F"!==i||(e+=' <img src="'+Dex.fxPrefix+"gender-"+i.toLowerCase()+'.png" alt="'+i+'" width="7" height="10" class="pixelated" />'),e+=100===t.level?"":" <small>L"+t.level+"</small>","");return 0<=t.speciesForme.indexOf("-Mega")?i="mega":"Kyogre-Primal"===t.speciesForme?i="alpha":"Groudon-Primal"===t.speciesForme&&(i="omega"),i&&(e+=' <img src="'+Dex.resourcePrefix+"sprites/misc/"+i+'.png" alt="'+i+'" style="vertical-align:text-bottom;" />'),e=e+'</strong><div class="hpbar"><div class="hptext"></div><div class="hptextborder"></div><div class="prevhp"><div class="hp"></div></div><div class="status"></div>'+"</div>"},t.resetStatbar=function(t,e){this.$statbar&&(this.$statbar.remove(),this.$statbar=null),this.updateStatbar(t,!0),!e&&this.$statbar&&this.$statbar.css({display:"block",left:this.statbarLeft,top:this.statbarTop,opacity:1})},t.updateStatbarIfExists=function(t,e,i){this.$statbar&&this.updateStatbar(t,e,i)},t.updateStatbar=function(t,e,i){if(this.scene.animating)if(t.isActive()){this.$statbar||(this.$statbar=$(this.getStatbarHTML(t)),this.scene.$stat.append(this.$statbar),e=!0),(e||i)&&(a=BattleScene.getHPColor(t),s=t.hpWidth(150),(n=this.$statbar.find(".hp")).css({width:s,"border-right-width":s?1:0}),"g"===a?n.removeClass("hp-yellow hp-red"):"y"===a?n.removeClass("hp-red").addClass("hp-yellow"):n.addClass("hp-yellow hp-red"),this.updateHPText(t)),e&&((s=this.$statbar.find(".prevhp")).css("width",t.hpWidth(150)+1),"g"===a?s.removeClass("prevhp-yellow prevhp-red"):"y"===a?s.removeClass("prevhp-red").addClass("prevhp-yellow"):s.addClass("prevhp-yellow prevhp-red"));var a,s,n,l,o,c,r,h="";if("brn"===t.status?h+='<span class="brn">BRN</span> ':"psn"===t.status?h+='<span class="psn">PSN</span> ':"tox"===t.status?h+='<span class="psn">TOX</span> ':"slp"===t.status?h+='<span class="slp">SLP</span> ':"par"===t.status?h+='<span class="par">PAR</span> ':"drw"===t.status?h+='<span class="drw">DRW</span> \x3c!--swag--\x3e':"frb"===t.status?h+='<span class="frb">FRB</span> ':"frz"===t.status&&(h+='<span class="frz">FRZ</span> '),t.volatiles.typechange&&t.volatiles.typechange[1])for(var p=t.volatiles.typechange[1].split("/"),m=0;m<p.length;m++){var y=p[m];h+='<img src="'+Dex.resourcePrefix+"sprites/types/"+encodeURIComponent(y)+'.png" alt="'+y+'" class="pixelated" /> '}for(l in t.volatiles.typeadd&&(n=t.volatiles.typeadd[1],h+='+<img src="'+Dex.resourcePrefix+"sprites/types/"+n+'.png" alt="'+n+'" class="pixelated" /> '),t.boosts)t.boosts[l]&&(h+='<span class="'+t.getBoostType(l)+'">'+t.getBoost(l)+"</span> ");for(o in t.volatiles)h+=d.getEffectTag(o);for(c in t.turnstatuses)"roost"===c&&!t.getTypeList().includes("Flying")||(h+=d.getEffectTag(c));for(r in t.movestatuses)h+=d.getEffectTag(r);this.$statbar.find(".status").html(h)}else this.$statbar&&this.$statbar.hide()},d.getEffectTag=function(t){var e=d.statusTable[t];return"string"==typeof e?e:d.statusTable[t]=null===e?"":'<span class="'+(e=void 0===e?["[["+t+"]]","neutral"]:e)[1]+'">'+e[0].replace(/ /g,"&nbsp;")+"</span> "},t.updateHPText=function(t){var e,i;this.$statbar&&(e=this.$statbar.find(".hptext"),i=this.$statbar.find(".hptextborder"),48===t.maxhp||this.scene.battle.hardcoreMode&&100===t.maxhp?(e.hide(),i.hide()):(this.scene.battle.hardcoreMode?e.html(t.hp+"/"):e.html(t.hpWidth(100)+"%"),e.show(),i.show()))},d}(Sprite),BattleEffects=(PokemonSprite.statusTable={formechange:null,typechange:null,typeadd:null,dynamax:["Dynamaxed","good"],trapped:null,throatchop:["Throat Chop","bad"],confusion:["Confused","bad"],healblock:["Heal Block","bad"],yawn:["Drowsy","bad"],flashfire:["Flash Fire","good"],imprison:["Imprisoning foe","good"],autotomize:["Lightened","neutral"],miracleeye:["Miracle Eye","bad"],foresight:["Foresight","bad"],telekinesis:["Telekinesis","neutral"],transform:["Transformed","neutral"],powertrick:["Power Trick","neutral"],curse:["Curse","bad"],nightmare:["Nightmare","bad"],attract:["Infatuation","bad"],torment:["Torment","bad"],taunt:["Taunt","bad"],disable:["Disable","bad"],embargo:["Embargo","bad"],ingrain:["Ingrain","good"],aquaring:["Aqua Ring","good"],stockpile1:["Stockpile","good"],stockpile2:["Stockpile&times;2","good"],stockpile3:["Stockpile&times;3","good"],perish0:["Perish now","bad"],perish1:["Perish next turn","bad"],perish2:["Perish in 2","bad"],perish3:["Perish in 3","bad"],airballoon:["Balloon","good"],leechseed:["Leech Seed","bad"],encore:["Encore","bad"],mustrecharge:["Must recharge","bad"],bide:["Bide","good"],magnetrise:["Magnet Rise","good"],smackdown:["Smack Down","bad"],focusenergy:["Critical Hit Boost","good"],slowstart:["Slow Start","bad"],noretreat:["No Retreat","bad"],octolock:["Octolock","bad"],tarshot:["Tar Shot","bad"],doomdesire:null,futuresight:null,mimic:["Mimic","good"],watersport:["Water Sport","good"],mudsport:["Mud Sport","good"],victorydance:["Victory Dance","good"],substitute:null,uproar:["Uproar","neutral"],rage:["Rage","neutral"],roost:["Landed","neutral"],protect:["Protect","good"],quickguard:["Quick Guard","good"],wideguard:["Wide Guard","good"],craftyshield:["Crafty Shield","good"],matblock:["Mat Block","good"],maxguard:["Max Guard","good"],helpinghand:["Helping Hand","good"],magiccoat:["Magic Coat","good"],destinybond:["Destiny Bond","good"],snatch:["Snatch","good"],grudge:["Grudge","good"],charge:["Charge","good"],endure:["Endure","good"],focuspunch:["Focusing","neutral"],shelltrap:["Trap set","neutral"],powder:["Powder","bad"],electrify:["Electrify","bad"],ragepowder:["Rage Powder","good"],followme:["Follow Me","good"],instruct:["Instruct","neutral"],beakblast:["Beak Blast","neutral"],laserfocus:["Laser Focus","good"],spotlight:["Spotlight","neutral"],itemremoved:null,bind:["Bind","bad"],clamp:["Clamp","bad"],firespin:["Fire Spin","bad"],infestation:["Infestation","bad"],magmastorm:["Magma Storm","bad"],sandtomb:["Sand Tomb","bad"],snaptrap:["Snap Trap","bad"],thundercage:["Thunder Cage","bad"],whirlpool:["Whirlpool","bad"],wrap:["Wrap","bad"],mist:["Mist","good"],lightscreen:["Light Screen","good"],reflect:["Reflect","good"]},Object.assign($.easing,{ballisticUp:function(t,e,i,a,s){return-3*t*t+4*t},ballisticDown:function(t,e,i,a,s){return 1-(-3*(t=1-t)*t+4*t)},quadUp:function(t,e,i,a,s){return 1-(t=1-t)*t},quadDown:function(t,e,i,a,s){return t*t}}),{wisp:{url:"wisp.png",w:100,h:100},poisonwisp:{url:"poisonwisp.png",w:100,h:100},waterwisp:{url:"waterwisp.png",w:100,h:100},mudwisp:{url:"mudwisp.png",w:100,h:100},blackwisp:{url:"blackwisp.png",w:100,h:100},fireball:{url:"fireball.png",w:64,h:64},bluefireball:{url:"bluefireball.png",w:64,h:64},icicle:{url:"icicle.png",w:80,h:60},pinkicicle:{url:"icicle-pink.png",w:80,h:60},lightning:{url:"lightning.png",w:41,h:229},rocks:{url:"rocks.png",w:100,h:100},rock1:{url:"rock1.png",w:64,h:80},rock2:{url:"rock2.png",w:66,h:72},rock3:{url:"rock3.png",w:66,h:72},leaf1:{url:"leaf1.png",w:32,h:26},leaf2:{url:"leaf2.png",w:40,h:26},bone:{url:"bone.png",w:29,h:29},caltrop:{url:"caltrop.png",w:80,h:80},greenmetal1:{url:"greenmetal1.png",w:45,h:45},greenmetal2:{url:"greenmetal2.png",w:45,h:45},poisoncaltrop:{url:"poisoncaltrop.png",w:80,h:80},shadowball:{url:"shadowball.png",w:100,h:100},energyball:{url:"energyball.png",w:100,h:100},electroball:{url:"electroball.png",w:100,h:100},mistball:{url:"mistball.png",w:100,h:100},iceball:{url:"iceball.png",w:100,h:100},flareball:{url:"flareball.png",w:100,h:100},pokeball:{url:"pokeball.png",w:24,h:24},fist:{url:"fist.png",w:55,h:49},fist1:{url:"fist1.png",w:49,h:55},foot:{url:"foot.png",w:50,h:75},topbite:{url:"topbite.png",w:108,h:64},bottombite:{url:"bottombite.png",w:108,h:64},web:{url:"web.png",w:120,h:122},leftclaw:{url:"leftclaw.png",w:44,h:60},rightclaw:{url:"rightclaw.png",w:44,h:60},leftslash:{url:"leftslash.png",w:57,h:56},rightslash:{url:"rightslash.png",w:57,h:56},leftchop:{url:"leftchop.png",w:100,h:130},rightchop:{url:"rightchop.png",w:100,h:130},angry:{url:"angry.png",w:30,h:30},heart:{url:"heart.png",w:30,h:30},pointer:{url:"pointer.png",w:100,h:100},sword:{url:"sword.png",w:48,h:100},impact:{url:"impact.png",w:127,h:119},stare:{url:"stare.png",w:100,h:35},shine:{url:"shine.png",w:127,h:119},feather:{url:"feather.png",w:100,h:38},shell:{url:"shell.png",w:100,h:91.5},petal:{url:"petal.png",w:60,h:60},gear:{url:"gear.png",w:100,h:100},alpha:{url:"alpha.png",w:80,h:80},omega:{url:"omega.png",w:80,h:80},rainbow:{url:"rainbow.png",w:128,h:128},zsymbol:{url:"z-symbol.png",w:150,h:100},ultra:{url:"ultra.png",w:113,h:165},hitmark:{url:"hitmarker.png",w:100,h:100},protect:{rawHTML:'<div class="turnstatus-protect" style="display:none;position:absolute" />',w:100,h:70},auroraveil:{rawHTML:'<div class="sidecondition-auroraveil" style="display:none;position:absolute" />',w:100,h:50},reflect:{rawHTML:'<div class="sidecondition-reflect" style="display:none;position:absolute" />',w:100,h:50},safeguard:{rawHTML:'<div class="sidecondition-safeguard" style="display:none;position:absolute" />',w:100,h:50},lightscreen:{rawHTML:'<div class="sidecondition-lightscreen" style="display:none;position:absolute" />',w:100,h:50},mist:{rawHTML:'<div class="sidecondition-mist" style="display:none;position:absolute" />',w:100,h:50}}),BattleBackdropsThree=(!function(){if(window.Dex&&Dex.resourcePrefix)for(var t in BattleEffects)BattleEffects[t].url&&(BattleEffects[t].url=Dex.fxPrefix+BattleEffects[t].url)}(),["bg-gen3.png","bg-gen3-cave.png","bg-gen3-ocean.png","bg-gen3-sand.png","bg-gen3-forest.png","bg-gen3-arena.png"]),BattleBackdropsFour=["bg-gen4.png","bg-gen4-cave.png","bg-gen4-snow.png","bg-gen4-indoors.png","bg-gen4-water.png"],BattleBackdropsFive=["bg-beach.png","bg-beachshore.png","bg-desert.png","bg-meadow.png","bg-thunderplains.png","bg-city.png","bg-earthycave.png","bg-mountain.png","bg-volcanocave.png","bg-dampcave.png","bg-forest.png","bg-river.png","bg-deepsea.png","bg-icecave.png","bg-route.png"],BattleBackdrops=["bg-aquacordetown.jpg","bg-beach.jpg","bg-city.jpg","bg-dampcave.jpg","bg-darkbeach.jpg","bg-darkcity.jpg","bg-darkmeadow.jpg","bg-deepsea.jpg","bg-desert.jpg","bg-earthycave.jpg","bg-elite4drake.jpg","bg-forest.jpg","bg-icecave.jpg","bg-leaderwallace.jpg","bg-library.jpg","bg-meadow.jpg","bg-orasdesert.jpg","bg-orassea.jpg","bg-skypillar.jpg"],BattleOtherAnims={hitmark:{anim:function(t,e){var i=e[0];t.showEffect("hitmark",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1},{opacity:.5,time:250},"linear","fade")}},attack:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:.1,opacity:1},{x:a.x,y:a.y,z:a.behind(40),scale:1,opacity:.5},"linear")}},contactattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:a.x,y:a.y+80,z:a.behind(-30),time:400},"ballistic"),i.anim({x:a.x,y:a.y+5,z:a.z,time:100}),i.anim({time:500},"ballistic2Back"),a.delay(450),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing"),t.wait(500)}},xattack:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:1,time:400},{x:a.leftof(-20),y:a.y,z:a.behind(20),scale:3,opacity:0,time:700},"linear"),t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:1,time:700},{x:a.leftof(-20),y:a.y,z:a.behind(20),scale:3,opacity:0,time:1e3},"linear"),a.delay(480),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:200},"swing"),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing"),i.anim({x:a.leftof(-30),y:a.y+80,z:a.behind(-30),time:400},"ballistic"),i.anim({x:a.leftof(30),y:a.y+5,z:a.z,time:100}),i.anim({x:a.leftof(30),y:a.y+80,z:a.behind(-30),time:200},"ballisticUp"),i.anim({x:a.leftof(-30),y:a.y+5,z:a.z,time:100}),i.anim({time:500},"ballistic2Back")}},slashattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:a.x,y:a.y+80,z:a.behind(-30),time:400},"ballistic"),i.anim({x:a.x,y:a.y+5,z:a.z,time:100}),i.anim({time:500},"ballistic2Back"),a.delay(450),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing"),t.showEffect("rightslash",{x:a.x,y:a.y,z:a.z,scale:1,opacity:1,time:500},{scale:3,opacity:0,time:800},"linear","fade")}},clawattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:a.leftof(-30),y:a.y+80,z:a.behind(-30),time:400},"ballistic"),i.anim({x:a.leftof(30),y:a.y+5,z:a.z,time:100}),i.anim({x:a.leftof(30),y:a.y+80,z:a.behind(-30),time:200},"ballisticUp"),i.anim({x:a.leftof(-30),y:a.y+5,z:a.z,time:100}),i.anim({time:500},"ballistic2Back"),a.delay(450),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:200},"swing"),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing"),t.showEffect("leftclaw",{x:a.x-20,y:a.y+20,z:a.z,scale:0,opacity:1,time:400},{x:a.x-20,y:a.y+20,z:a.z,scale:3,opacity:0,time:700},"linear","fade"),t.showEffect("leftclaw",{x:a.x-20,y:a.y-20,z:a.z,scale:0,opacity:1,time:400},{x:a.x-20,y:a.y-20,z:a.z,scale:3,opacity:0,time:700},"linear","fade"),t.showEffect("rightclaw",{x:a.x+20,y:a.y+20,z:a.z,scale:0,opacity:1,time:700},{x:a.x+20,y:a.y+20,z:a.z,scale:3,opacity:0,time:1e3},"linear","fade"),t.showEffect("rightclaw",{x:a.x+20,y:a.y-20,z:a.z,scale:0,opacity:1,time:700},{x:a.x+20,y:a.y-20,z:a.z,scale:3,opacity:0,time:1e3},"linear","fade")}},punchattack:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:1,time:400},{x:a.leftof(-20),y:a.y,z:a.behind(20),scale:3,opacity:0,time:700},"linear"),t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:1,time:500},{x:a.leftof(-20),y:a.y,z:a.behind(20),scale:3,opacity:0,time:800},"linear"),t.showEffect("fist",{x:a.x,y:a.y,z:a.z,scale:1,opacity:1,time:400},{x:a.leftof(-20),y:a.y,z:a.behind(20),scale:2,opacity:0,time:800},"linear"),i.anim({x:a.leftof(20),y:a.y,z:a.behind(-20),time:400},"ballistic2Under"),i.anim({x:a.x,y:a.y,z:a.z,time:50}),i.anim({time:500},"ballistic2"),a.delay(425),a.anim({x:a.leftof(-15),y:a.y,z:a.behind(15),time:50},"swing"),a.anim({time:300},"swing")}},bite:{anim:function(t,e){e[0];var i=e[1];t.showEffect("topbite",{x:i.x,y:i.y+50,z:i.z,scale:.5,opacity:0,time:370},{x:i.x,y:i.y+10,z:i.z,scale:.5,opacity:1,time:500},"linear","fade"),t.showEffect("bottombite",{x:i.x,y:i.y-50,z:i.z,scale:.5,opacity:0,time:370},{x:i.x,y:i.y-10,z:i.z,scale:.5,opacity:1,time:500},"linear","fade")}},kick:{anim:function(t,e){e[0];var i=e[1];t.showEffect("foot",{x:i.x,y:i.y,z:i.z,scale:1,opacity:1,time:400},{x:i.x,y:i.y-20,z:i.behind(15),scale:2,opacity:0,time:800},"linear")}},fastattack:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:.5,time:260},{scale:2,opacity:0,time:560},"linear"),t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:.5,time:310},{scale:2,opacity:0,time:610},"linear"),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.3,time:50},{x:a.x,y:a.y,z:a.behind(70),time:350},"accel","fade"),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.3,time:100},{x:a.x,y:a.y,z:a.behind(70),time:400},"accel","fade"),i.anim({x:a.x,y:a.y,z:a.behind(70),time:300,opacity:.5},"accel"),i.anim({x:a.x,y:a.x,z:a.behind(100),opacity:0,time:100},"linear"),i.anim({x:i.x,y:i.y,z:i.behind(70),opacity:0,time:1},"linear"),i.anim({opacity:1,time:500},"decel"),a.delay(260),a.anim({z:a.behind(30),time:100},"swing"),a.anim({time:300},"swing")}},fastanimattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({z:i.behind(-70),time:50,opacity:1},"decel"),i.anim({opacity:1,time:150},"accel"),a.anim({z:a.behind(30),time:70},"decel"),a.anim({time:170},"accel")}},fastanimspecial:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("shadowball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:.8,time:0},{x:a.x,y:a.y,z:a.z,time:100},"decel"),t.showEffect("shadowball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:.8,time:70},{x:a.x,y:a.y,z:a.z,time:170},"decel"),a.anim({z:a.behind(30),time:70},"decel"),a.anim({time:170},"accel")}},fastanimself:{anim:function(t,e){var i=e[0];e[1];i.anim({scale:1.5,time:50},"decel"),i.anim({time:170},"accel")}},sneakattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:i.leftof(-20),y:i.y,z:i.behind(-20),opacity:0,time:200},"linear"),i.anim({x:a.x,y:a.y,z:a.behind(-120),opacity:0,time:1},"linear"),i.anim({x:a.x,y:a.y,z:a.behind(40),opacity:1,time:250},"linear"),i.anim({x:a.x,y:a.y,z:a.behind(-5),opacity:0,time:300},"linear"),i.anim({opacity:0,time:1},"linear"),i.anim({time:300,opacity:1},"linear"),a.delay(330),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing")}},spinattack:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:a.x,y:a.y+60,z:a.behind(-30),time:400},"ballistic2"),i.anim({x:a.x,y:a.y+5,z:a.z,time:100}),i.anim({time:500},"ballistic2"),a.delay(450),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing"),t.wait(500)}},bound:{anim:function(t,e){var i=e[0];t.showEffect("iceball",{x:i.x,y:i.y+15,z:i.z,scale:.7,xscale:2,opacity:.3,time:0},{scale:.4,xscale:1,opacity:.1,time:500},"decel","fade"),t.showEffect("iceball",{x:i.x,y:i.y-5,z:i.z,scale:.7,xscale:2,opacity:.3,time:50},{scale:.4,xscale:1,opacity:.1,time:550},"decel","fade"),t.showEffect("iceball",{x:i.x,y:i.y-20,z:i.z,scale:.7,xscale:2,opacity:.3,time:100},{scale:.4,xscale:1,opacity:.1,time:600},"decel","fade"),i.anim({y:i.y+15,z:i.behind(10),yscale:1.3,time:200},"swing"),i.anim({time:200},"swing"),i.delay(25),i.anim({x:i.leftof(-10),y:i.y+15,z:i.behind(5),yscale:1.3,time:200},"swing"),i.anim({time:200},"swing")}},selfstatus:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.2,time:0},{scale:0,opacity:1,time:300},"linear"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.2,time:200},{scale:0,opacity:1,time:500},"linear")}},lightstatus:{anim:function(t,e){var i=e[0];t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.1,time:0},{scale:0,opacity:.5,time:600},"linear")}},chargestatus:{anim:function(t,e){var i=e[0];t.showEffect("electroball",{x:i.x-60,y:i.y+40,z:i.z,scale:.7,opacity:.7,time:0},{x:i.x,y:i.y,scale:.2,opacity:.2,time:300},"linear","fade"),t.showEffect("electroball",{x:i.x+60,y:i.y-5,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:300},"linear","fade"),t.showEffect("electroball",{x:i.x-30,y:i.y+60,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:400},"linear","fade"),t.showEffect("electroball",{x:i.x+20,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:400},"linear","fade"),t.showEffect("electroball",{x:i.x-70,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:200},{x:i.x,y:i.y,scale:.2,opacity:.2,time:500},"linear","fade")}},heal:{anim:function(t,e){var i=e[0];t.showEffect("iceball",{x:i.x+30,y:i.y+5,z:i.z,scale:.1,opacity:.7,time:200},{x:i.x+40,y:i.y+10,opacity:0,time:600},"accel"),t.showEffect("iceball",{x:i.x-30,y:i.y-10,z:i.z,scale:.1,opacity:.7,time:300},{x:i.x-40,y:i.y-20,opacity:0,time:700},"accel"),t.showEffect("iceball",{x:i.x+15,y:i.y+10,z:i.z,scale:.1,opacity:.7,time:400},{x:i.x+25,y:i.y+20,opacity:0,time:800},"accel"),t.showEffect("iceball",{x:i.x-15,y:i.y-30,z:i.z,scale:.1,opacity:.7,time:500},{x:i.x-25,y:i.y-40,opacity:0,time:900},"accel")}},shiny:{anim:function(t,e){var i=e[0];t.backgroundEffect("#000000",800,.3,100),t.showEffect("shine",{x:i.x+5,y:i.y+20,z:i.z,scale:.1,opacity:.7,time:450},{y:i.y+35,opacity:0,time:675},"decel"),t.showEffect("shine",{x:i.x+15,y:i.y+20,z:i.z,scale:.2,opacity:.7,time:475},{x:i.x+25,y:i.y+30,opacity:0,time:700},"decel"),t.showEffect("shine",{x:i.x-15,y:i.y+20,z:i.z,scale:.2,opacity:.7,time:500},{x:i.x-25,y:i.y+30,opacity:0,time:725},"decel"),t.showEffect("shine",{x:i.x-20,y:i.y+5,z:i.z,scale:.2,opacity:.7,time:550},{x:i.x-30,y:i.y-5,opacity:0,time:775},"decel"),t.showEffect("shine",{x:i.x+15,y:i.y+10,z:i.z,scale:.2,opacity:.7,time:650},{x:i.x+35,y:i.y-5,opacity:0,time:875},"decel"),t.showEffect("shine",{x:i.x+5,y:i.y-5,z:i.z,scale:.2,opacity:.7,time:675},{y:i.y-20,opacity:0,time:900},"decel")}},flight:{anim:function(t,e){var i=e[0],a=e[1];i.anim({x:i.leftof(-200),y:i.y+80,z:i.z,opacity:0,time:350},"accel"),i.anim({x:a.leftof(-200),y:a.y+80,z:a.z,time:1},"linear"),i.anim({x:a.x,y:a.y,z:a.z,opacity:1,time:350},"accel"),t.showEffect("wisp",{x:a.x,y:a.y,z:a.z,scale:0,opacity:.5,time:700},{scale:2,opacity:0,time:900},"linear"),i.anim({x:a.leftof(100),y:a.y-40,z:a.z,opacity:0,time:175}),i.anim({x:i.x,y:i.y+40,z:i.behind(40),time:1}),i.anim({x:i.x,y:i.y,z:i.z,time:250},"decel"),a.delay(700),a.anim({z:a.behind(20),time:100},"swing"),a.anim({time:300},"swing")}},shake:{anim:function(t,e){var i=e[0];i.anim({x:i.x-10,time:200}),i.anim({x:i.x+10,time:300}),i.anim({x:i.x,time:200})}},dance:{anim:function(t,e){var i=e[0];i.anim({x:i.x-10}),i.anim({x:i.x+10}),i.anim({x:i.x})}},consume:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.leftof(-25),y:i.y+40,z:i.behind(-20),scale:.5,opacity:1},{x:i.leftof(-15),y:i.y+35,z:i.z,scale:0,opacity:.2,time:500},"swing","fade"),i.delay(400),i.anim({y:i.y+5,yscale:1.1,time:200},"swing"),i.anim({time:200},"swing"),i.anim({y:i.y+5,yscale:1.1,time:200},"swing"),i.anim({time:200},"swing")}},leech:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("energyball",{x:a.x-30,y:a.y-40,z:a.z,scale:.2,opacity:.7,time:0},{x:i.x,y:i.y,z:i.z,time:500,opacity:.1},"ballistic2","fade"),t.showEffect("energyball",{x:a.x+40,y:a.y-35,z:a.z,scale:.2,opacity:.7,time:50},{x:i.x,y:i.y,z:i.z,time:550,opacity:.1},"linear","fade"),t.showEffect("energyball",{x:a.x+20,y:a.y-25,z:a.z,scale:.2,opacity:.7,time:100},{x:i.x,y:i.y,z:i.z,time:600,opacity:.1},"ballistic2Under","fade")}},drain:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("energyball",{x:a.x,y:a.y,z:a.z,scale:.6,opacity:.6,time:0},{x:i.x,y:i.y,z:i.z,time:500,opacity:0},"ballistic2"),t.showEffect("energyball",{x:a.x,y:a.y,z:a.z,scale:.6,opacity:.6,time:50},{x:i.x,y:i.y,z:i.z,time:550,opacity:0},"linear"),t.showEffect("energyball",{x:a.x,y:a.y,z:a.z,scale:.6,opacity:.6,time:100},{x:i.x,y:i.y,z:i.z,time:600,opacity:0},"ballistic2Under")}},hydroshot:{anim:function(t,e){var i=e[0],a=e[1];t.showEffect("waterwisp",{x:i.x,y:i.y,z:i.z,scale:.4,opacity:.3},{x:a.x+10,y:a.y+5,z:a.behind(30),scale:1,opacity:.6},"decel","explode"),t.showEffect("waterwisp",{x:i.x,y:i.y,z:i.z,scale:.4,opacity:.3,time:75},{x:a.x-10,y:a.y-5,z:a.behind(30),scale:1,opacity:.6},"decel","explode"),t.showEffect("waterwisp",{x:i.x,y:i.y,z:i.z,scale:.4,opacity:.3,time:150},{x:a.x,y:a.y+5,z:a.behind(30),scale:1,opacity:.6},"decel","explode")}},sound:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:0,opacity:.7,time:0},{z:i.behind(-50),scale:5,opacity:0,time:400},"linear"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:0,opacity:.7,time:150},{z:i.behind(-50),scale:5,opacity:0,time:600},"linear"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:0,opacity:.7,time:300},{z:i.behind(-50),scale:5,opacity:0,time:800},"linear")}},gravity:{anim:function(t,e){var i=e[0];i.anim({y:i.y-20,yscale:.5,time:300},"decel"),i.delay(200),i.anim({time:300})}},futuresighthit:{anim:function(t,e){var i=e[0];t.backgroundEffect("#AA44BB",250,.6),t.backgroundEffect("#AA44FF",250,.6,400),i.anim({scale:1.2,time:100}),i.anim({scale:1,time:100}),i.anim({scale:1.4,time:150}),i.anim({scale:1,time:150}),t.wait(700)}},doomdesirehit:{anim:function(t,e){var i=e[0];t.backgroundEffect("#ffffff",600,.6),t.showEffect("fireball",{x:i.x+40,y:i.y,z:i.z,scale:0,opacity:.6},{scale:6,opacity:0},"linear"),t.showEffect("fireball",{x:i.x-40,y:i.y-20,z:i.z,scale:0,opacity:.6,time:150},{scale:6,opacity:0},"linear"),t.showEffect("fireball",{x:i.x+10,y:i.y+20,z:i.z,scale:0,opacity:.6,time:300},{scale:6,opacity:0},"linear"),i.delay(100),i.anim({x:i.x-30,time:75}),i.anim({x:i.x+30,time:100}),i.anim({x:i.x-30,time:100}),i.anim({x:i.x+30,time:100}),i.anim({x:i.x,time:100})}},itemoff:{anim:function(t,e){var i=e[0];t.showEffect("pokeball",{x:i.x,y:i.y,z:i.z,scale:1,opacity:1},{x:i.x,y:i.y+40,z:i.behind(70),opacity:0,time:400},"ballistic2")}},anger:{anim:function(t,e){var i=e[0];t.showEffect("angry",{x:i.x+20,y:i.y+20,z:i.z,scale:.5,opacity:.5,time:0},{scale:1,opacity:1,time:300},"ballistic2Under","fade"),t.showEffect("angry",{x:i.x-20,y:i.y+10,z:i.z,scale:.5,opacity:.5,time:100},{scale:1,opacity:1,time:400},"ballistic2Under","fade"),t.showEffect("angry",{x:i.x,y:i.y+40,z:i.z,scale:.5,opacity:.5,time:200},{scale:1,opacity:1,time:500},"ballistic2Under","fade")}},bidecharge:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x+30,y:i.y,z:i.z,scale:1,opacity:1,time:0},{y:i.y+60,opacity:.2,time:400},"linear","fade"),t.showEffect("wisp",{x:i.x-30,y:i.y,z:i.z,scale:1,opacity:1,time:100},{y:i.y+60,opacity:.2,time:500},"linear","fade"),t.showEffect("wisp",{x:i.x+15,y:i.y,z:i.z,scale:1,opacity:1,time:200},{y:i.y+60,opacity:.2,time:600},"linear","fade"),t.showEffect("wisp",{x:i.x-15,y:i.y,z:i.z,scale:1,opacity:1,time:300},{y:i.y+60,opacity:.2,time:700},"linear","fade"),i.anim({x:i.x-2.5,time:75},"swing"),i.anim({x:i.x+2.5,time:75},"swing"),i.anim({x:i.x-2.5,time:75},"swing"),i.anim({x:i.x+2.5,time:75},"swing"),i.anim({x:i.x-2.5,time:75},"swing"),i.anim({time:100},"accel")}},bideunleash:{anim:function(t,e){var i=e[0];t.showEffect("fireball",{x:i.x+40,y:i.y,z:i.z,scale:0,opacity:.6},{scale:6,opacity:0},"linear"),t.showEffect("fireball",{x:i.x-40,y:i.y-20,z:i.z,scale:0,opacity:.6,time:150},{scale:6,opacity:0},"linear"),t.showEffect("fireball",{x:i.x+10,y:i.y+20,z:i.z,scale:0,opacity:.6,time:300},{scale:6,opacity:0},"linear"),i.anim({x:i.x-30,time:75}),i.anim({x:i.x+30,time:100}),i.anim({x:i.x-30,time:100}),i.anim({x:i.x+30,time:100}),i.anim({x:i.x-30,time:100}),i.anim({x:i.x+30,time:100}),i.anim({x:i.x,time:100})}},spectralthiefboost:{anim:function(t,e){var i=e[0],a=e[1];t.backgroundEffect("linear-gradient(#000000 30%, #440044",1400,.5),t.showEffect("shadowball",{x:a.x,y:a.y-30,z:a.z,scale:.5,xscale:.5,yscale:1,opacity:.5},{scale:2,xscale:4,opacity:.1,time:400},"decel","fade"),t.showEffect("poisonwisp",{x:a.x,y:a.y-25,z:a.z,scale:1},{x:a.x+50,scale:3,xscale:3.5,opacity:.3,time:500},"linear","fade"),t.showEffect("poisonwisp",{x:a.x,y:a.y-25,z:a.z,scale:1},{x:a.x-50,scale:3,xscale:3.5,opacity:.3,time:500},"linear","fade"),t.showEffect("shadowball",{x:a.x+35,y:a.y,z:a.z,opacity:.4,scale:.25,time:50},{y:a.y-40,opacity:0,time:300},"accel"),t.showEffect("shadowball",{x:a.x-35,y:a.y,z:a.z,opacity:.4,scale:.25,time:100},{y:a.y-40,opacity:0,time:350},"accel"),t.showEffect("shadowball",{x:a.x+15,y:a.y,z:a.z,opacity:.4,scale:.5,time:150},{y:a.y-40,opacity:0,time:400},"accel"),t.showEffect("shadowball",{x:a.x+15,y:a.y,z:a.z,opacity:.4,scale:.25,time:200},{y:a.y-40,opacity:0,time:450},"accel"),t.showEffect("poisonwisp",{x:a.x-50,y:a.y-40,z:a.z,scale:2,opacity:.3,time:300},{x:i.x-50,y:i.y-40,z:i.z,time:900},"decel","fade"),t.showEffect("poisonwisp",{x:a.x-50,y:a.y-40,z:a.z,scale:2,opacity:.3,time:400},{x:i.x-50,y:i.y-40,z:i.z,time:900},"decel","fade"),t.showEffect("poisonwisp",{x:a.x,y:a.y-40,z:a.z,scale:2,opacity:.3,time:450},{x:i.x,y:i.y-40,z:i.z,time:950},"decel","fade"),t.showEffect("shadowball",{x:i.x,y:i.y-30,z:i.z,scale:0,xscale:.5,yscale:1,opacity:.5,time:750},{scale:2,xscale:4,opacity:.1,time:1200},"decel","fade"),t.showEffect("shadowball",{x:i.x+35,y:i.y-40,z:i.z,opacity:.4,scale:.25,time:750},{y:i.y,opacity:0,time:1e3},"decel"),t.showEffect("shadowball",{x:i.x-35,y:i.y-40,z:i.z,opacity:1,scale:.25,time:800},{y:i.y,opacity:0,time:1150},"decel"),t.showEffect("shadowball",{x:i.x+15,y:i.y-40,z:i.z,opacity:1,scale:.25,time:950},{y:i.y,opacity:0,time:1200},"decel"),t.showEffect("shadowball",{x:i.x+15,y:i.y-40,z:i.z,opacity:1,scale:.25,time:1e3},{y:i.y,opacity:0,time:1350},"decel"),t.showEffect("poisonwisp",{x:i.x,y:i.y-25,z:i.z,scale:2,opacity:1,time:750},{x:i.x+75,opacity:.3,time:1200},"linear","fade"),t.showEffect("poisonwisp",{x:i.x,y:i.y-25,z:i.z,scale:2,opacity:1,time:750},{x:i.x-75,opacity:.3,time:1200},"linear","fade"),a.anim({x:a.x-15,time:75}),a.anim({x:a.x+15,time:100}),a.anim({x:a.x-15,time:100}),a.anim({x:a.x+15,time:100}),a.anim({x:a.x-15,time:100}),a.anim({x:a.x+15,time:100}),a.anim({x:a.x,time:100})}},schoolingin:{anim:function(t,e){var i=e[0];t.backgroundEffect("#0000DD",600,.2),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:2.5,opacity:1},{scale:3,time:600},"linear","explode"),t.showEffect("waterwisp",{x:i.x,y:i.y,z:i.z,scale:3,opacity:.3},{scale:3.25,time:600},"linear","explode"),t.showEffect("iceball",{x:i.leftof(200),y:i.y+40,z:i.z,scale:.5,opacity:.5},{x:i.x,y:i.y,z:i.z,opacity:0,time:200},"ballistic","fade"),t.showEffect("iceball",{x:i.leftof(-140),y:i.y-60,z:i.z,scale:.5,opacity:.5,time:100},{x:i.x,y:i.y,z:i.z,opacity:0,time:300},"ballistic2Under","fade"),t.showEffect("iceball",{x:i.leftof(-140),y:i.y+50,z:i.behind(170),scale:.5,opacity:.5,time:200},{x:i.x,y:i.y,z:i.z,opacity:0,time:400},"ballistic2","fade"),t.showEffect("iceball",{x:i.x,y:i.y+30,z:i.behind(-250),scale:.5,opacity:.5,time:200},{x:i.x,y:i.y,z:i.z,opacity:0,time:500},"ballistic","fade"),t.showEffect("iceball",{x:i.leftof(240),y:i.y-80,z:i.z,scale:.5,opacity:.5,time:300},{x:i.x,y:i.y,z:i.z,opacity:0,time:600},"ballistic2Under")}},schoolingout:{anim:function(t,e){var i=e[0];t.backgroundEffect("#0000DD",600,.2),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:3,opacity:1},{scale:2,time:600},"linear","explode"),t.showEffect("waterwisp",{x:i.x,y:i.y,z:i.z,scale:3.25,opacity:.3},{scale:2.5,time:600},"linear","explode"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:0},{x:i.leftof(200),y:i.y+40,z:i.z,scale:.5,opacity:.5,time:200},"ballistic","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:0,time:100},{x:i.leftof(-140),y:i.y-60,z:i.z,opacity:.5,time:300},"ballistic2Under","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:0,time:200},{x:i.leftof(-140),y:i.y+50,z:i.behind(170),opacity:.5,time:400},"ballistic2","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:0,time:200},{x:i.x,y:i.y+30,z:i.behind(-250),opacity:.5,time:500},"ballistic","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:0,time:300},{x:i.leftof(240),y:i.y-80,z:i.z,opacity:.5,time:600},"ballistic2Under")}},primalalpha:{anim:function(t,e){var i=e[0];t.backgroundEffect("#0000DD",500,.4),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.2,time:0},{scale:.5,opacity:1,time:300},"linear","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:4,opacity:0,time:700},"linear","fade"),t.showEffect("shadowball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:.5,time:300},{scale:5,opacity:0,time:600},"linear","fade"),t.showEffect("alpha",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:2.5,opacity:0,time:600},"decel")}},primalomega:{anim:function(t,e){var i=e[0];t.backgroundEffect("linear-gradient(#390000 30%, #B84038)",500,.4),t.showEffect("flareball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.2,time:0},{scale:.5,opacity:1,time:300},"linear","fade"),t.showEffect("flareball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:4,opacity:0,time:700},"linear","fade"),t.showEffect("shadowball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:.5,time:300},{scale:5,opacity:0,time:600},"linear","fade"),t.showEffect("omega",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:2.5,opacity:0,time:600},"decel")}},megaevo:{anim:function(t,e){var i=e[0];t.backgroundEffect("#835BA5",500,.6),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:.2,time:0},{scale:.5,opacity:1,time:300},"linear","fade"),t.showEffect("iceball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:4,opacity:0,time:700},"linear","fade"),t.showEffect("mistball",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:.5,time:300},{scale:5,opacity:0,time:600},"linear","fade"),t.showEffect("rainbow",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:300},{scale:5,opacity:0,time:600},"linear","fade")}},zpower:{anim:function(t,e){var i=e[0];t.backgroundEffect("linear-gradient(#000000 20%, #0000DD)",1800,.4),t.showEffect("electroball",{x:i.x-60,y:i.y+40,z:i.z,scale:.7,opacity:.7,time:0},{x:i.x,y:i.y,scale:.2,opacity:.2,time:300},"linear","fade"),t.showEffect("electroball",{x:i.x+60,y:i.y-5,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:300},"linear","fade"),t.showEffect("electroball",{x:i.x-30,y:i.y+60,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:400},"linear","fade"),t.showEffect("electroball",{x:i.x+20,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:400},"linear","fade"),t.showEffect("electroball",{x:i.x-70,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:200},{x:i.x,y:i.y,scale:.2,opacity:.2,time:500},"linear","fade"),t.showEffect("zsymbol",{x:i.x,y:i.y,z:i.z,scale:.7,opacity:1,time:500},{scale:1,opacity:.5,time:800},"decel","explode"),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.3,time:800},{y:i.y+20,scale:2,opacity:0,time:1200},"accel"),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.3,time:1e3},{y:i.y+20,scale:2,opacity:0,time:1400},"accel"),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.3,time:1200},{y:i.y+20,scale:2,opacity:0,time:1600},"accel")}},powerconstruct:{anim:function(t,e){var i=e[0],a=[1,-1,1,-1],s=[1,-1,-1,1],n=[1,0,-1,0],l=[0,1,0,-1];t.backgroundEffect("#000000",1e3,.7);for(var o=0;o<4;o++)t.showEffect("energyball",{x:i.x+150*a[o],y:i.y-50,z:i.z+70*s[o],scale:.1,xscale:.5,opacity:.4},{x:i.x,y:i.y-50,z:i.z,scale:.3,xscale:.8,opacity:0,time:500},"decel","fade"),t.showEffect("energyball",{x:i.x+200*n[o],y:i.y-50,z:i.z+90*l[o],scale:.1,xscale:.5,opacity:.4},{x:i.x,y:i.y-50,z:i.z,scale:.3,xscale:.8,opacity:0,time:500},"decel","fade"),t.showEffect("energyball",{x:i.x+50*a[o],y:i.y-50,z:i.z+100*s[o],scale:.1,xscale:.5,opacity:.4,time:200},{x:i.x,y:i.y-50,z:i.z,scale:.3,xscale:.8,opacity:0,time:500},"decel","fade"),t.showEffect("energyball",{x:i.x+100*n[o],y:i.y-50,z:i.z+90*l[o],scale:.1,xscale:.5,opacity:.4,time:200},{x:i.x,y:i.y-50,z:i.z,scale:.3,xscale:.8,opacity:0,time:500},"decel","fade");t.showEffect("energyball",{x:i.x,y:i.y-25,z:i.z,scale:3,opacity:0,time:50},{scale:1,opacity:.8,time:300},"linear","fade"),t.showEffect("energyball",{x:i.x,y:i.y-25,z:i.z,scale:3.5,opacity:0,time:150},{scale:1.5,opacity:1,time:350},"linear","fade"),t.showEffect("energyball",{x:i.x,y:i.y-25,z:i.z,scale:.5,opacity:1,time:200},{scale:3,opacity:0,time:600},"linear","fade"),t.showEffect("wisp",{x:i.x,y:i.y-25,z:i.z,scale:1,opacity:.6,time:100},{scale:3.5,opacity:.8,time:500},"linear","explode")}},ultraburst:{anim:function(t,e){var i=e[0];t.backgroundEffect("#000000",600,.5),t.backgroundEffect("#ffffff",500,1,550),t.showEffect("wisp",{x:i.x-60,y:i.y+40,z:i.z,scale:.7,opacity:.7,time:0},{x:i.x,y:i.y,scale:.2,opacity:.2,time:150},"linear","fade"),t.showEffect("wisp",{x:i.x+60,y:i.y-5,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:150},"linear","fade"),t.showEffect("wisp",{x:i.x-30,y:i.y+60,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:250},"linear","fade"),t.showEffect("wisp",{x:i.x+20,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:250},"linear","fade"),t.showEffect("wisp",{x:i.x-70,y:i.y-50,z:i.z,scale:.7,opacity:.7,time:100},{x:i.x,y:i.y,scale:.2,opacity:.2,time:300},"linear","fade"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:1.5,opacity:1},{scale:4,time:600},"linear","explode"),t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:0},{scale:2.25,opacity:.1,time:600},"linear","explode"),t.showEffect("energyball",{x:i.x,y:i.y,z:i.z,scale:2,opacity:0,time:200},{scale:2.25,opacity:.1,time:600},"linear","explode"),t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:6,opacity:.2},{scale:1,opacity:0,time:300},"linear"),t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:6,opacity:.2,time:150},{scale:1,opacity:0,time:450},"linear"),t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:6,opacity:.2,time:300},{scale:1,opacity:0,time:600},"linear"),t.showEffect("ultra",{x:i.x,y:i.y,z:i.z,scale:.5,opacity:1,time:600},{scale:1,opacity:0,time:900},"decel"),t.showEffect("iceball",{x:i.x,y:i.y-60,z:i.z,scale:.5,xscale:.25,yscale:0,opacity:.5,time:600},{scale:2,xscale:6,yscale:1,opacity:0,time:800},"linear"),t.showEffect("iceball",{x:i.x,y:i.y-60,z:i.z,scale:.5,xscale:.25,yscale:.75,opacity:.5,time:800},{scale:2,xscale:6,opacity:.1,time:1e3},"linear")}}},BattleStatusAnims={brn:{anim:function(t,e){var i=e[0];t.showEffect("fireball",{x:i.x-20,y:i.y-15,z:i.z,scale:.2,opacity:.3},{x:i.x+40,y:i.y+15,z:i.z,scale:1,opacity:1,time:300},"swing","fade")}},psn:{anim:function(t,e){var i=e[0];t.showEffect("poisonwisp",{x:i.x+30,y:i.y-40,z:i.z,scale:.2,opacity:1,time:0},{y:i.y,scale:1,opacity:.5,time:300},"decel","fade"),t.showEffect("poisonwisp",{x:i.x-30,y:i.y-40,z:i.z,scale:.2,opacity:1,time:100},{y:i.y,scale:1,opacity:.5,time:400},"decel","fade"),t.showEffect("poisonwisp",{x:i.x,y:i.y-40,z:i.z,scale:.2,opacity:1,time:200},{y:i.y,scale:1,opacity:.5,time:500},"decel","fade")}},slp:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x,y:i.y+20,z:i.z,scale:.5,opacity:.1},{x:i.x,y:i.y+20,z:i.behind(-50),scale:1.5,opacity:1,time:400},"ballistic2Under","fade"),t.showEffect("wisp",{x:i.x,y:i.y+20,z:i.z,scale:.5,opacity:.1,time:200},{x:i.x,y:i.y+20,z:i.behind(-50),scale:1.5,opacity:1,time:600},"ballistic2Under","fade")}},drw:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x,y:i.y+20,z:i.z,scale:.5,opacity:.1},{x:i.x,y:i.y+20,z:i.behind(-50),scale:1.5,opacity:1,time:400},"ballistic2Under","fade"),t.showEffect("wisp",{x:i.x,y:i.y+20,z:i.z,scale:.5,opacity:.1,time:200},{x:i.x,y:i.y+20,z:i.behind(-50),scale:1.5,opacity:1,time:600},"ballistic2Under","fade")}},par:{anim:function(t,e){var i=e[0];t.showEffect("electroball",{x:i.x,y:i.y,z:i.z,scale:1.5,opacity:.2},{scale:2,opacity:.1,time:300},"linear","fade"),i.delay(100),i.anim({x:i.x-1,time:75},"swing"),i.anim({x:i.x+1,time:75},"swing"),i.anim({x:i.x-1,time:75},"swing"),i.anim({x:i.x+1,time:75},"swing"),i.anim({x:i.x-1,time:75},"swing"),i.anim({time:100},"accel")}},frz:{anim:function(t,e){var i=e[0];t.showEffect("icicle",{x:i.x-30,y:i.y,z:i.z,scale:.5,opacity:.5,time:200},{scale:.9,opacity:0,time:600},"linear","fade"),t.showEffect("icicle",{x:i.x,y:i.y-30,z:i.z,scale:.5,opacity:.5,time:300},{scale:.9,opacity:0,time:650},"linear","fade"),t.showEffect("icicle",{x:i.x+15,y:i.y,z:i.z,scale:.5,opacity:.5,time:400},{scale:.9,opacity:0,time:700},"linear","fade"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:1,opacity:.5},{scale:3,opacity:0,time:600},"linear","fade")}},frb:{anim:function(t,e){var i=e[0];t.showEffect("icicle",{x:i.x-30,y:i.y,z:i.z,scale:.5,opacity:.5,time:200},{scale:.9,opacity:0,time:600},"linear","fade"),t.showEffect("icicle",{x:i.x,y:i.y-30,z:i.z,scale:.5,opacity:.5,time:300},{scale:.9,opacity:0,time:650},"linear","fade"),t.showEffect("icicle",{x:i.x+15,y:i.y,z:i.z,scale:.5,opacity:.5,time:400},{scale:.9,opacity:0,time:700},"linear","fade"),t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:1,opacity:.5},{scale:3,opacity:0,time:600},"linear","fade")}},flinch:{anim:function(t,e){var i=e[0];t.showEffect("shadowball",{x:i.x,y:i.y,z:i.z,scale:1,opacity:.2},{scale:3,opacity:.1,time:300},"linear","fade")}},attracted:{anim:function(t,e){var i=e[0];t.showEffect("heart",{x:i.x+20,y:i.y+20,z:i.z,scale:.5,opacity:.5,time:0},{scale:1,opacity:1,time:300},"ballistic2Under","fade"),t.showEffect("heart",{x:i.x-20,y:i.y+10,z:i.z,scale:.5,opacity:.5,time:100},{scale:1,opacity:1,time:400},"ballistic2Under","fade"),t.showEffect("heart",{x:i.x,y:i.y+40,z:i.z,scale:.5,opacity:.5,time:200},{scale:1,opacity:1,time:500},"ballistic2Under","fade")}},cursed:{anim:function(t,e){var i=e[0];t.backgroundEffect("#000000",700,.2),i.delay(300),i.anim({x:i.x-5,time:50}),i.anim({x:i.x+5,time:50}),i.anim({x:i.x-5,time:50}),i.anim({x:i.x+5,time:50}),i.anim({x:i.x,time:50}),t.showEffect(i.sp,{x:i.x,y:i.y,z:i.z,opacity:.5,time:0},{z:i.behind(20),opacity:0,time:600},"decel")}},confused:{anim:function(t,e){var i=e[0];t.showEffect("electroball",{x:i.x+50,y:i.y+30,z:i.z,scale:.1,opacity:1,time:400},{x:i.x-50,scale:.15,opacity:.4,time:600},"linear","fade"),t.showEffect("electroball",{x:i.x-50,y:i.y+30,z:i.z,scale:.1,opacity:1,time:400},{x:i.x+50,scale:.15,opacity:.4,time:600},"linear","fade"),t.showEffect("electroball",{x:i.x+50,y:i.y+30,z:i.z,scale:.1,opacity:1,time:600},{x:i.x-50,scale:.4,opacity:.4,time:800},"linear","fade"),t.showEffect("electroball",{x:i.x-50,y:i.y+30,z:i.z,scale:.15,opacity:1,time:600},{x:i.x+50,scale:.4,opacity:.4,time:800},"linear","fade")}},confusedselfhit:{anim:function(t,e){var i=e[0];t.showEffect("wisp",{x:i.x,y:i.y,z:i.z,scale:0,opacity:.5},{scale:2,opacity:0,time:200},"linear"),i.delay(50),i.anim({x:i.leftof(2),z:i.behind(5),time:100},"swing"),i.anim({time:300},"swing")}}};BattleStatusAnims.focuspunch={anim:BattleStatusAnims.flinch.anim};
